"use strict";var lt=Object.defineProperty;var ut=(e,t,n)=>t in e?lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var S=(e,t,n)=>ut(e,typeof t!="symbol"?t+"":t,n);const k=require("obsidian");class Ne extends k.Modal{constructor(n,s){super(n);S(this,"plugin");S(this,"md");S(this,"child");this.plugin=s}setMarkdown(n){this.md=n}async onOpen(){this.modalEl.addClass("syntax-modal","mod-settings"),this.contentEl.addClass("markdown-rendered"),this.md&&(this.plugin.processor.extractInfo(this.md),this.child=new k.MarkdownRenderChild(this.contentEl),await k.MarkdownRenderer.render(this.plugin.app,this.md,this.contentEl,"",this.child))}async onClose(){var n;(n=this.child)==null||n.unload(),this.contentEl.empty()}}class E extends k.Setting{constructor(n,s){super(n);S(this,"plugin");this.plugin=s}addInfo(n){return this.addExtraButton(s=>{s.setIcon("info").onClick(async()=>{const i=new Ne(this.plugin.app,this.plugin);i.setTitle(this.nameEl.innerText),i.setMarkdown(n),i.open()})})}addModal(n){return this.addExtraButton(s=>{const i=new Ne(this.plugin.app,this.plugin);s.setIcon("settings").onClick(()=>{n(i),i.open()})})}}var R=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ce(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var oe,Ae;function ft(){if(Ae)return oe;Ae=1;var e=1/0,t=9007199254740991,n=17976931348623157e292,s=NaN,i="[object Function]",a="[object GeneratorFunction]",r="[object Symbol]",u=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,g=/^0o[0-7]+$/i,h=/^(?:0|[1-9]\d*)$/,f=parseInt,y=Object.prototype,T=y.toString,A=Math.ceil,m=Math.max;function O(l,p,w,P){for(var ot=-1,Pe=m(A((p-l)/(w||1)),0),je=Array(Pe);Pe--;)je[++ot]=l,l+=w;return je}function $(l){return function(p,w,P){return P&&typeof P!="number"&&U(p,w,P)&&(w=P=void 0),p=re(p),w===void 0?(w=p,p=0):w=re(w),P=P===void 0?p<w?1:-1:re(P),O(p,w,P)}}function b(l,p){return p=p??t,!!p&&(typeof l=="number"||h.test(l))&&l>-1&&l%1==0&&l<p}function U(l,p,w){if(!Z(w))return!1;var P=typeof p;return(P=="number"?et(w)&&b(p,w.length):P=="string"&&p in w)?Je(w[p],l):!1}function Je(l,p){return l===p||l!==l&&p!==p}function et(l){return l!=null&&nt(l.length)&&!tt(l)}function tt(l){var p=Z(l)?T.call(l):"";return p==i||p==a}function nt(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=t}function Z(l){var p=typeof l;return!!l&&(p=="object"||p=="function")}function st(l){return!!l&&typeof l=="object"}function it(l){return typeof l=="symbol"||st(l)&&T.call(l)==r}function re(l){if(!l)return l===0?l:0;if(l=at(l),l===e||l===-e){var p=l<0?-1:1;return p*n}return l===l?l:0}function at(l){if(typeof l=="number")return l;if(it(l))return s;if(Z(l)){var p=typeof l.valueOf=="function"?l.valueOf():l;l=Z(p)?p+"":p}if(typeof l!="string")return l===0?l:+l;l=l.replace(u,"");var w=d.test(l);return w||g.test(l)?f(l.slice(2),w?2:8):o.test(l)?s:+l}var rt=$();return oe=rt,oe}var dt=ft();const ht=ce(dt);function pt(e){return e==="on"||e==="desktop"&&k.Platform.isDesktop||e==="mobile"&&k.Platform.isMobile}function ye(e){const t=document.createElement("span");return t.className=`syntax-icon syntax-icon-${e}`,k.setIcon(t,e),t}function ee(e){return e.split(/\r\n?|\n/)}function _(e,t=","){const n=e.replace(new RegExp(`${t}{2,}`,"g"),t).replace(new RegExp(`^${t}|${t}$`,"g"),"");return[...new Set(n.split(new RegExp(`${t}|\\r\\n?|\\n`)))]}function ze(e){const t=[];return _(e).forEach(n=>{const[s,i]=n.split("-");i?t.push(...ht(parseInt(s,10),parseInt(i,10)+1)):t.push(parseInt(s,10))}),t}function gt(e){const t=_(e).map(n=>(n=n.replace(/\+/g,"p").replace(/#/g,"s").replace(/[^\w-_]/g,""),n.trim().toLowerCase())).filter(n=>n.length);return[...new Set(t)]}function le(e){return e?e.hasClass("syntax-block")?"block":"inline":"all"}function mt(e,t){const n=[];if(t==="inline")return e&&n.push({prefix:"inline-code",params:"",value:_(e,":").join(":")}),n;const s=["mod"];return F.forEach(i=>s.push(i.id,...i.aliases)),Array.from(e.matchAll(/(?:[^\s"']+|"[^"]*"|'[^']*')+/g)).forEach(i=>{let[a,r]=i[0].split(/=(.+)/),u="";const o=a.match(/^([\w-]+)(\[([\w\-!:]+)])$/m);o&&(a=String(o[1]),u=String(o[3])),!(!s.includes(a)||typeof r>"u")&&n.push({prefix:a,params:u,value:r})}),n}function te(e,t){const n=[...String.isString(t)?[t]:[t.id,...t.aliases]];return e.filter(s=>n.includes(s.prefix))}var ge=function(e,t){return ge=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])},ge(e,t)};function X(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ge(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var v=function(){return v=Object.assign||function(t){for(var n,s=1,i=arguments.length;s<i;s++){n=arguments[s];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},v.apply(this,arguments)};function bt(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var s=n.call(e),i,a=[],r;try{for(;(t===void 0||t-- >0)&&!(i=s.next()).done;)a.push(i.value)}catch(u){r={error:u}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a}function ct(e,t,n){if(n||arguments.length===2)for(var s=0,i=t.length,a;s<i;s++)(a||!(s in t))&&(a||(a=Array.prototype.slice.call(t,0,s)),a[s]=t[s]);return e.concat(a||Array.prototype.slice.call(t))}var yt="4.1.5",wt=Object.prototype.hasOwnProperty;function j(e){return typeof e=="boolean"}function kt(e,t,n){var s;return e.length>t&&(n==null?(n="&hellip;",s=3):s=n.length,e=e.substring(0,t-s)+n),e}function D(e,t){for(var n=e.length-1;n>=0;n--)t(e[n])===!0&&e.splice(n,1)}function q(e){throw new Error("Unhandled case for value: '".concat(e,"'"))}var J=/\s+/,De=function(){function e(t){t===void 0&&(t={}),this.tagName="",this.attrs={},this.innerHTML="",this.tagName=t.tagName||"",this.attrs=t.attrs||{},this.innerHTML=t.innerHtml||t.innerHTML||""}return e.prototype.setTagName=function(t){return this.tagName=t,this},e.prototype.getTagName=function(){return this.tagName},e.prototype.setAttr=function(t,n){var s=this.getAttrs();return s[t]=n,this},e.prototype.getAttr=function(t){return this.getAttrs()[t]},e.prototype.setAttrs=function(t){return Object.assign(this.getAttrs(),t),this},e.prototype.getAttrs=function(){return this.attrs},e.prototype.setClass=function(t){return this.setAttr("class",t)},e.prototype.addClass=function(t){for(var n=this.getClass(),s=n?n.split(J):[],i=t.split(J),a;a=i.shift();)s.indexOf(a)===-1&&s.push(a);return this.getAttrs().class=s.join(" "),this},e.prototype.removeClass=function(t){for(var n=this.getClass(),s=n?n.split(J):[],i=t.split(J),a;s.length&&(a=i.shift());){var r=s.indexOf(a);r!==-1&&s.splice(r,1)}return this.getAttrs().class=s.join(" "),this},e.prototype.getClass=function(){return this.getAttrs().class||""},e.prototype.hasClass=function(t){return(" "+this.getClass()+" ").indexOf(" "+t+" ")!==-1},e.prototype.setInnerHTML=function(t){return this.innerHTML=t,this},e.prototype.setInnerHtml=function(t){return this.setInnerHTML(t)},e.prototype.getInnerHTML=function(){return this.innerHTML||""},e.prototype.getInnerHtml=function(){return this.getInnerHTML()},e.prototype.toAnchorString=function(){var t=this.getTagName(),n=this.buildAttrsStr();return n=n?" "+n:"",["<",t,n,">",this.getInnerHtml(),"</",t,">"].join("")},e.prototype.buildAttrsStr=function(){var t=this.getAttrs(),n=[];for(var s in t)wt.call(t,s)&&n.push(s+'="'+t[s]+'"');return n.join(" ")},e}();function vt(e,t,n){var s,i;if(n==null?(n="&hellip;",i=3,s=8):(i=n.length,s=n.length),e.length<=t)return e;var a=t-i,r=xt(e);if(r.query){var u=r.query.match(/^(.*?)(?=(\?|#))(.*?)$/i);u&&(r.query=r.query.substr(0,u[1].length),e=Ie(r))}if(e.length<=t||(r.host&&(r.host=r.host.replace(/^www\./,""),e=Ie(r)),e.length<=t))return e;var o="";if(r.host&&(o+=r.host),o.length>=a)return r.host.length===t?(r.host.substr(0,t-i)+n).substr(0,a+s):ue(o,a,n).substr(0,a+s);var d="";if(r.path&&(d+="/"+r.path),r.query&&(d+="?"+r.query),d)if((o+d).length>=a){if((o+d).length==t)return(o+d).substr(0,t);var g=a-o.length;return(o+ue(d,g,n)).substr(0,a+s)}else o+=d;if(r.fragment){var h="#"+r.fragment;if((o+h).length>=a){if((o+h).length==t)return(o+h).substr(0,t);var f=a-o.length;return(o+ue(h,f,n)).substr(0,a+s)}else o+=h}if(r.scheme&&r.host){var y=r.scheme+"://";if((o+y).length<a)return(y+o).substr(0,t)}if(o.length<=t)return o;var T="";return a>0&&(T=o.substr(-1*Math.floor(a/2))),(o.substr(0,Math.ceil(a/2))+n+T).substr(0,a+s)}function xt(e){var t={},n=e,s=n.match(/^([a-z]+):\/\//i);return s&&(t.scheme=s[1],n=n.slice(s[0].length)),s=n.match(/^(.*?)(?=(\?|#|\/|$))/i),s&&(t.host=s[1],n=n.slice(s[0].length)),s=n.match(/^\/(.*?)(?=(\?|#|$))/i),s&&(t.path=s[1],n=n.slice(s[0].length)),s=n.match(/^\?(.*?)(?=(#|$))/i),s&&(t.query=s[1],n=n.slice(s[0].length)),s=n.match(/^#(.*?)$/i),s&&(t.fragment=s[1]),t}function Ie(e){var t="";return e.scheme&&e.host&&(t+=e.scheme+"://"),e.host&&(t+=e.host),e.path&&(t+="/"+e.path),e.query&&(t+="?"+e.query),e.fragment&&(t+="#"+e.fragment),t}function ue(e,t,n){var s=t/2,i=Math.ceil(s),a=-1*Math.floor(s),r="";return a<0&&(r=e.substr(a)),e.substr(0,i)+n+r}function Tt(e,t,n){if(e.length<=t)return e;var s,i;n==null?(n="&hellip;",s=8,i=3):(s=n.length,i=n.length);var a=t-i,r="";return a>0&&(r=e.substr(-1*Math.floor(a/2))),(e.substr(0,Math.ceil(a/2))+n+r).substr(0,a+s)}function St(e,t,n){return kt(e,t,n)}var Et=function(){function e(t){t===void 0&&(t={}),this.newWindow=!1,this.truncate={},this.className="",this.newWindow=t.newWindow||!1,this.truncate=t.truncate||{},this.className=t.className||""}return e.prototype.build=function(t){return new De({tagName:"a",attrs:this.createAttrs(t),innerHtml:this.processAnchorText(t.getAnchorText())})},e.prototype.createAttrs=function(t){var n={href:t.getAnchorHref()},s=this.createCssClass(t);return s&&(n.class=s),this.newWindow&&(n.target="_blank",n.rel="noopener noreferrer"),this.truncate.length&&this.truncate.length<t.getAnchorText().length&&(n.title=t.getAnchorHref()),n},e.prototype.createCssClass=function(t){var n=this.className;if(n){for(var s=[n],i=t.getCssClassSuffixes(),a=0,r=i.length;a<r;a++)s.push(n+"-"+i[a]);return s.join(" ")}else return""},e.prototype.processAnchorText=function(t){return t=this.doTruncate(t),t},e.prototype.doTruncate=function(t){var n=this.truncate;if(!n.length)return t;var s=n.length,i=n.location;return i==="smart"?vt(t,s):i==="middle"?Tt(t,s):St(t,s)},e}(),Y=function(){function e(t){this._=null,this.matchedText="",this.offset=0,this.tagBuilder=t.tagBuilder,this.matchedText=t.matchedText,this.offset=t.offset}return e.prototype.getMatchedText=function(){return this.matchedText},e.prototype.setOffset=function(t){this.offset=t},e.prototype.getOffset=function(){return this.offset},e.prototype.getCssClassSuffixes=function(){return[this.type]},e.prototype.buildTag=function(){return this.tagBuilder.build(this)},e}();function Pt(e){return e>=0&&e<=31||e==127}function G(e){return e>=65&&e<=90||e>=97&&e<=122}function x(e){return e>=48&&e<=57}function we(e){return e==34||e==39}function C(e){return e<8232?e<160?e>=9&&e<=13||e==32:e<5760?e==160:e==5760||e>=8192&&e<=8202:e<8287?e>=8232&&e<=8233||e==8239:e<12288?e==8287:e==12288||e==65279}function B(e){return e<4800?e<2949?e<2451?e<1425?e<768?e<192?e<169?e<65?e>=48&&e<=57:e>=65&&e<=90||e>=97&&e<=122:e<181?e>=169&&e<=170||e==174:e==181||e==186:e<710?e<216?e>=192&&e<=214:e>=216&&e<=246||e>=248&&e<=705:e<748?e>=710&&e<=721||e>=736&&e<=740:e==748||e==750:e<910?e<895?e<886?e>=768&&e<=884:e>=886&&e<=887||e>=890&&e<=893:e<904?e==895||e==902:e>=904&&e<=906||e==908:e<1155?e<931?e>=910&&e<=929:e>=931&&e<=1013||e>=1015&&e<=1153:e<1369?e>=1155&&e<=1327||e>=1329&&e<=1366:e==1369||e>=1377&&e<=1415:e<1808?e<1552?e<1476?e<1471?e>=1425&&e<=1469:e==1471||e>=1473&&e<=1474:e<1488?e>=1476&&e<=1477||e==1479:e>=1488&&e<=1514||e>=1520&&e<=1522:e<1749?e<1568?e>=1552&&e<=1562:e>=1568&&e<=1641||e>=1646&&e<=1747:e<1770?e>=1749&&e<=1756||e>=1759&&e<=1768:e>=1770&&e<=1788||e==1791:e<2230?e<2042?e<1869?e>=1808&&e<=1866:e>=1869&&e<=1969||e>=1984&&e<=2037:e<2112?e==2042||e>=2048&&e<=2093:e>=2112&&e<=2139||e>=2208&&e<=2228:e<2406?e<2260?e>=2230&&e<=2237:e>=2260&&e<=2273||e>=2275&&e<=2403:e<2437?e>=2406&&e<=2415||e>=2417&&e<=2435:e>=2437&&e<=2444||e>=2447&&e<=2448:e<2693?e<2579?e<2519?e<2486?e<2474?e>=2451&&e<=2472:e>=2474&&e<=2480||e==2482:e<2503?e>=2486&&e<=2489||e>=2492&&e<=2500:e>=2503&&e<=2504||e>=2507&&e<=2510:e<2534?e<2524?e==2519:e>=2524&&e<=2525||e>=2527&&e<=2531:e<2565?e>=2534&&e<=2545||e>=2561&&e<=2563:e>=2565&&e<=2570||e>=2575&&e<=2576:e<2631?e<2613?e<2602?e>=2579&&e<=2600:e>=2602&&e<=2608||e>=2610&&e<=2611:e<2620?e>=2613&&e<=2614||e>=2616&&e<=2617:e==2620||e>=2622&&e<=2626:e<2649?e<2635?e>=2631&&e<=2632:e>=2635&&e<=2637||e==2641:e<2662?e>=2649&&e<=2652||e==2654:e>=2662&&e<=2677||e>=2689&&e<=2691:e<2821?e<2759?e<2730?e<2703?e>=2693&&e<=2701:e>=2703&&e<=2705||e>=2707&&e<=2728:e<2741?e>=2730&&e<=2736||e>=2738&&e<=2739:e>=2741&&e<=2745||e>=2748&&e<=2757:e<2784?e<2763?e>=2759&&e<=2761:e>=2763&&e<=2765||e==2768:e<2809?e>=2784&&e<=2787||e>=2790&&e<=2799:e==2809||e>=2817&&e<=2819:e<2887?e<2858?e<2831?e>=2821&&e<=2828:e>=2831&&e<=2832||e>=2835&&e<=2856:e<2869?e>=2858&&e<=2864||e>=2866&&e<=2867:e>=2869&&e<=2873||e>=2876&&e<=2884:e<2911?e<2902?e>=2887&&e<=2888||e>=2891&&e<=2893:e>=2902&&e<=2903||e>=2908&&e<=2909:e<2929?e>=2911&&e<=2915||e>=2918&&e<=2927:e==2929||e>=2946&&e<=2947:e<3517?e<3205?e<3046?e<2984?e<2969?e<2958?e>=2949&&e<=2954:e>=2958&&e<=2960||e>=2962&&e<=2965:e<2974?e>=2969&&e<=2970||e==2972:e>=2974&&e<=2975||e>=2979&&e<=2980:e<3014?e<2990?e>=2984&&e<=2986:e>=2990&&e<=3001||e>=3006&&e<=3010:e<3024?e>=3014&&e<=3016||e>=3018&&e<=3021:e==3024||e==3031:e<3142?e<3086?e<3072?e>=3046&&e<=3055:e>=3072&&e<=3075||e>=3077&&e<=3084:e<3114?e>=3086&&e<=3088||e>=3090&&e<=3112:e>=3114&&e<=3129||e>=3133&&e<=3140:e<3160?e<3146?e>=3142&&e<=3144:e>=3146&&e<=3149||e>=3157&&e<=3158:e<3174?e>=3160&&e<=3162||e>=3168&&e<=3171:e>=3174&&e<=3183||e>=3200&&e<=3203:e<3333?e<3274?e<3242?e<3214?e>=3205&&e<=3212:e>=3214&&e<=3216||e>=3218&&e<=3240:e<3260?e>=3242&&e<=3251||e>=3253&&e<=3257:e>=3260&&e<=3268||e>=3270&&e<=3272:e<3296?e<3285?e>=3274&&e<=3277:e>=3285&&e<=3286||e==3294:e<3313?e>=3296&&e<=3299||e>=3302&&e<=3311:e>=3313&&e<=3314||e>=3329&&e<=3331:e<3423?e<3389?e<3342?e>=3333&&e<=3340:e>=3342&&e<=3344||e>=3346&&e<=3386:e<3402?e>=3389&&e<=3396||e>=3398&&e<=3400:e>=3402&&e<=3406||e>=3412&&e<=3415:e<3458?e<3430?e>=3423&&e<=3427:e>=3430&&e<=3439||e>=3450&&e<=3455:e<3482?e>=3458&&e<=3459||e>=3461&&e<=3478:e>=3482&&e<=3505||e>=3507&&e<=3515:e<3804?e<3722?e<3570?e<3535?e<3520?e==3517:e>=3520&&e<=3526||e==3530:e<3544?e>=3535&&e<=3540||e==3542:e>=3544&&e<=3551||e>=3558&&e<=3567:e<3664?e<3585?e>=3570&&e<=3571:e>=3585&&e<=3642||e>=3648&&e<=3662:e<3716?e>=3664&&e<=3673||e>=3713&&e<=3714:e==3716||e>=3719&&e<=3720:e<3754?e<3737?e<3725?e==3722:e==3725||e>=3732&&e<=3735:e<3749?e>=3737&&e<=3743||e>=3745&&e<=3747:e==3749||e==3751:e<3776?e<3757?e>=3754&&e<=3755:e>=3757&&e<=3769||e>=3771&&e<=3773:e<3784?e>=3776&&e<=3780||e==3782:e>=3784&&e<=3789||e>=3792&&e<=3801:e<4176?e<3902?e<3872?e<3840?e>=3804&&e<=3807:e==3840||e>=3864&&e<=3865:e<3895?e>=3872&&e<=3881||e==3893:e==3895||e==3897:e<3974?e<3913?e>=3902&&e<=3911:e>=3913&&e<=3948||e>=3953&&e<=3972:e<4038?e>=3974&&e<=3991||e>=3993&&e<=4028:e==4038||e>=4096&&e<=4169:e<4688?e<4301?e<4256?e>=4176&&e<=4253:e>=4256&&e<=4293||e==4295:e<4348?e==4301||e>=4304&&e<=4346:e>=4348&&e<=4680||e>=4682&&e<=4685:e<4746?e<4698?e>=4688&&e<=4694||e==4696:e>=4698&&e<=4701||e>=4704&&e<=4744:e<4786?e>=4746&&e<=4749||e>=4752&&e<=4784:e>=4786&&e<=4789||e>=4792&&e<=4798:e<11035?e<7416?e<6176?e<5873?e<4992?e<4824?e<4802?e==4800:e>=4802&&e<=4805||e>=4808&&e<=4822:e<4888?e>=4824&&e<=4880||e>=4882&&e<=4885:e>=4888&&e<=4954||e>=4957&&e<=4959:e<5121?e<5024?e>=4992&&e<=5007:e>=5024&&e<=5109||e>=5112&&e<=5117:e<5761?e>=5121&&e<=5740||e>=5743&&e<=5759:e>=5761&&e<=5786||e>=5792&&e<=5866:e<6002?e<5920?e<5888?e>=5873&&e<=5880:e>=5888&&e<=5900||e>=5902&&e<=5908:e<5984?e>=5920&&e<=5940||e>=5952&&e<=5971:e>=5984&&e<=5996||e>=5998&&e<=6e3:e<6108?e<6016?e>=6002&&e<=6003:e>=6016&&e<=6099||e==6103:e<6155?e>=6108&&e<=6109||e>=6112&&e<=6121:e>=6155&&e<=6157||e>=6160&&e<=6169:e<6783?e<6512?e<6400?e<6272?e>=6176&&e<=6263:e>=6272&&e<=6314||e>=6320&&e<=6389:e<6448?e>=6400&&e<=6430||e>=6432&&e<=6443:e>=6448&&e<=6459||e>=6470&&e<=6509:e<6608?e<6528?e>=6512&&e<=6516:e>=6528&&e<=6571||e>=6576&&e<=6601:e<6688?e>=6608&&e<=6617||e>=6656&&e<=6683:e>=6688&&e<=6750||e>=6752&&e<=6780:e<7040?e<6832?e<6800?e>=6783&&e<=6793:e>=6800&&e<=6809||e==6823:e<6992?e>=6832&&e<=6846||e>=6912&&e<=6987:e>=6992&&e<=7001||e>=7019&&e<=7027:e<7245?e<7168?e>=7040&&e<=7155:e>=7168&&e<=7223||e>=7232&&e<=7241:e<7376?e>=7245&&e<=7293||e>=7296&&e<=7304:e>=7376&&e<=7378||e>=7380&&e<=7414:e<8450?e<8130?e<8025?e<7960?e<7424?e>=7416&&e<=7417:e>=7424&&e<=7669||e>=7675&&e<=7957:e<8008?e>=7960&&e<=7965||e>=7968&&e<=8005:e>=8008&&e<=8013||e>=8016&&e<=8023:e<8031?e<8027?e==8025:e==8027||e==8029:e<8118?e>=8031&&e<=8061||e>=8064&&e<=8116:e>=8118&&e<=8124||e==8126:e<8205?e<8150?e<8134?e>=8130&&e<=8132:e>=8134&&e<=8140||e>=8144&&e<=8147:e<8178?e>=8150&&e<=8155||e>=8160&&e<=8172:e>=8178&&e<=8180||e>=8182&&e<=8188:e<8305?e<8252?e==8205:e==8252||e==8265:e<8336?e==8305||e==8319:e>=8336&&e<=8348||e>=8400&&e<=8432:e<8579?e<8486?e<8469?e<8455?e==8450:e==8455||e>=8458&&e<=8467:e<8482?e==8469||e>=8473&&e<=8477:e==8482||e==8484:e<8495?e<8488?e==8486:e==8488||e>=8490&&e<=8493:e<8517?e>=8495&&e<=8505||e>=8508&&e<=8511:e>=8517&&e<=8521||e==8526:e<9410?e<9e3?e<8592?e>=8579&&e<=8580:e>=8592&&e<=8703||e>=8986&&e<=8987:e<9193?e==9e3||e==9167:e>=9193&&e<=9203||e>=9208&&e<=9210:e<9723?e<9654?e==9410||e>=9642&&e<=9643:e==9654||e==9664:e<10548?e>=9723&&e<=9726||e>=9728&&e<=10175:e>=10548&&e<=10549||e>=11013&&e<=11015:e<43259?e<12445?e<11688?e<11520?e<11264?e<11088?e>=11035&&e<=11036:e==11088||e==11093:e<11360?e>=11264&&e<=11310||e>=11312&&e<=11358:e>=11360&&e<=11492||e>=11499&&e<=11507:e<11568?e<11559?e>=11520&&e<=11557:e==11559||e==11565:e<11647?e>=11568&&e<=11623||e==11631:e>=11647&&e<=11670||e>=11680&&e<=11686:e<11744?e<11712?e<11696?e>=11688&&e<=11694:e>=11696&&e<=11702||e>=11704&&e<=11710:e<11728?e>=11712&&e<=11718||e>=11720&&e<=11726:e>=11728&&e<=11734||e>=11736&&e<=11742:e<12330?e<11823?e>=11744&&e<=11775:e==11823||e>=12293&&e<=12294:e<12353?e>=12330&&e<=12341||e>=12347&&e<=12349:e>=12353&&e<=12438||e>=12441&&e<=12442:e<42512?e<12951?e<12549?e<12449?e>=12445&&e<=12447:e>=12449&&e<=12538||e>=12540&&e<=12543:e<12704?e>=12549&&e<=12589||e>=12593&&e<=12686:e>=12704&&e<=12730||e>=12784&&e<=12799:e<19968?e<12953?e==12951:e==12953||e>=13312&&e<=19893:e<42192?e>=19968&&e<=40917||e>=40960&&e<=42124:e>=42192&&e<=42237||e>=42240&&e<=42508:e<42891?e<42623?e<42560?e>=42512&&e<=42539:e>=42560&&e<=42610||e>=42612&&e<=42621:e<42775?e>=42623&&e<=42725||e>=42736&&e<=42737:e>=42775&&e<=42783||e>=42786&&e<=42888:e<43072?e<42928?e>=42891&&e<=42926:e>=42928&&e<=42935||e>=42999&&e<=43047:e<43216?e>=43072&&e<=43123||e>=43136&&e<=43205:e>=43216&&e<=43225||e>=43232&&e<=43255:e<55243?e<43744?e<43488?e<43312?e<43261?e==43259:e==43261||e>=43264&&e<=43309:e<43392?e>=43312&&e<=43347||e>=43360&&e<=43388:e>=43392&&e<=43456||e>=43471&&e<=43481:e<43600?e<43520?e>=43488&&e<=43518:e>=43520&&e<=43574||e>=43584&&e<=43597:e<43642?e>=43600&&e<=43609||e>=43616&&e<=43638:e>=43642&&e<=43714||e>=43739&&e<=43741:e<43824?e<43785?e<43762?e>=43744&&e<=43759:e>=43762&&e<=43766||e>=43777&&e<=43782:e<43808?e>=43785&&e<=43790||e>=43793&&e<=43798:e>=43808&&e<=43814||e>=43816&&e<=43822:e<44012?e<43868?e>=43824&&e<=43866:e>=43868&&e<=43877||e>=43888&&e<=44010:e<44032?e>=44012&&e<=44013||e>=44016&&e<=44025:e>=44032&&e<=55203||e>=55216&&e<=55238:e<64848?e<64298?e<64112?e<55296?e>=55243&&e<=55291:e>=55296&&e<=57343||e>=63744&&e<=64109:e<64275?e>=64112&&e<=64217||e>=64256&&e<=64262:e>=64275&&e<=64279||e>=64285&&e<=64296:e<64320?e<64312?e>=64298&&e<=64310:e>=64312&&e<=64316||e==64318:e<64326?e>=64320&&e<=64321||e>=64323&&e<=64324:e>=64326&&e<=64433||e>=64467&&e<=64829:e<65296?e<65024?e<64914?e>=64848&&e<=64911:e>=64914&&e<=64967||e>=65008&&e<=65019:e<65136?e>=65024&&e<=65039||e>=65056&&e<=65071:e>=65136&&e<=65140||e>=65142&&e<=65276:e<65474?e<65345?e>=65296&&e<=65305||e>=65313&&e<=65338:e>=65345&&e<=65370||e>=65382&&e<=65470:e<65490?e>=65474&&e<=65479||e>=65482&&e<=65487:e>=65490&&e<=65495||e>=65498&&e<=65500}function jt(e){return e<47?e<42?e==33||e>=35&&e<=39:e>=42&&e<=43||e==45:e<63?e==47||e==61:e<94?e==63:e>=94&&e<=96||e>=123&&e<=126}function Nt(e){return e<91?e<47?e>=35&&e<=43||e==45:e<61?e==47:e==61||e==64:e<95?e==91||e==93:e<123?e==95:e>=123&&e<=126||e==10003}function qe(e){return e<58?e<44?e==33:e==44||e==46:e<63?e>=58&&e<=59:e==63||e==94}function At(e){return e<91?e==40:e==91||e==123}function Me(e){return e<93?e==41:e==93||e==125}var It=/^(?:xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--clchc0ea0b2g2a9gcd|xn--w4r85el8fhu5dnra|travelersinsurance|vermögensberatung|xn--5su34j936bgsg|xn--bck1b9a5dre4c|xn--mgbah1a3hjkrd|xn--mgbai9azgqp6j|xn--mgberp4a5d4ar|xn--xkc2dl3a5ee0h|vermögensberater|xn--fzys8d69uvgm|xn--mgba7c0bbn0a|xn--mgbcpq6gpa1a|xn--xkc2al3hye2a|americanexpress|kerryproperties|sandvikcoromant|xn--i1b6b1a6a2e|xn--kcrx77d1x4a|xn--lgbbat1ad8j|xn--mgba3a4f16a|xn--mgbc0a9azcg|xn--nqv7fs00ema|americanfamily|weatherchannel|xn--54b7fta0cc|xn--6qq986b3xl|xn--80aqecdr1a|xn--b4w605ferd|xn--fiq228c5hs|xn--h2breg3eve|xn--jlq480n2rg|xn--mgba3a3ejt|xn--mgbaam7a8h|xn--mgbayh7gpa|xn--mgbbh1a71e|xn--mgbca7dzdo|xn--mgbi4ecexp|xn--mgbx4cd0ab|xn--rvc1e0am3e|international|lifeinsurance|wolterskluwer|xn--cckwcxetd|xn--eckvdtc9d|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--h2brj9c8c|xn--tiq49xqyj|xn--yfro4i67o|xn--ygbi2ammx|construction|lplfinancial|scholarships|versicherung|xn--3e0b707e|xn--45br5cyl|xn--4dbrk0ce|xn--80adxhks|xn--80asehdb|xn--8y0a063a|xn--gckr3f0f|xn--mgb9awbf|xn--mgbab2bd|xn--mgbgu82a|xn--mgbpl2fh|xn--mgbt3dhd|xn--mk1bu44c|xn--ngbc5azd|xn--ngbe9e0a|xn--ogbpf8fl|xn--qcka1pmc|accountants|barclaycard|blackfriday|blockbuster|bridgestone|calvinklein|contractors|creditunion|engineering|enterprises|investments|kerryhotels|lamborghini|motorcycles|olayangroup|photography|playstation|productions|progressive|redumbrella|williamhill|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--2scrj9c|xn--3bst00m|xn--3ds443g|xn--3hcrj9c|xn--42c2d9a|xn--45brj9c|xn--55qw42g|xn--6frz82g|xn--80ao21a|xn--9krt00a|xn--cck2b3b|xn--czr694b|xn--d1acj3b|xn--efvy88h|xn--fct429k|xn--fjq720a|xn--flw351e|xn--g2xx48c|xn--gecrj9c|xn--gk3at1e|xn--h2brj9c|xn--hxt814e|xn--imr513n|xn--j6w193g|xn--jvr189m|xn--kprw13d|xn--kpry57d|xn--mgbbh1a|xn--mgbtx2b|xn--mix891f|xn--nyqy26a|xn--otu796d|xn--pgbs0dh|xn--q9jyb4c|xn--rhqv96g|xn--rovu88b|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--vuq861b|xn--w4rs40l|xn--xhq521b|xn--zfr164b|சிங்கப்பூர்|accountant|apartments|associates|basketball|bnpparibas|boehringer|capitalone|consulting|creditcard|cuisinella|eurovision|extraspace|foundation|healthcare|immobilien|industries|management|mitsubishi|nextdirect|properties|protection|prudential|realestate|republican|restaurant|schaeffler|tatamotors|technology|university|vlaanderen|xn--30rr7y|xn--3pxu8k|xn--45q11c|xn--4gbrim|xn--55qx5d|xn--5tzm5g|xn--80aswg|xn--90a3ac|xn--9dbq2a|xn--9et52u|xn--c2br7g|xn--cg4bki|xn--czrs0t|xn--czru2d|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--io0a7i|xn--kput3i|xn--mxtq1m|xn--o3cw4h|xn--pssy2u|xn--q7ce6a|xn--unup4y|xn--wgbh1c|xn--wgbl6a|xn--y9a3aq|accenture|allfinanz|amsterdam|analytics|aquarelle|barcelona|bloomberg|christmas|community|directory|education|equipment|fairwinds|financial|firestone|fresenius|furniture|goldpoint|hisamitsu|homedepot|homegoods|homesense|institute|insurance|kuokgroup|landrover|lifestyle|marketing|marshalls|melbourne|microsoft|panasonic|pramerica|richardli|shangrila|solutions|statebank|statefarm|stockholm|travelers|vacations|xn--90ais|xn--c1avg|xn--d1alf|xn--e1a4c|xn--fhbei|xn--j1aef|xn--j1amh|xn--l1acc|xn--ngbrx|xn--nqv7f|xn--p1acf|xn--qxa6a|xn--tckwe|xn--vhquv|yodobashi|موريتانيا|abudhabi|airforce|allstate|attorney|barclays|barefoot|bargains|baseball|boutique|bradesco|broadway|brussels|builders|business|capetown|catering|catholic|cipriani|cleaning|clinique|clothing|commbank|computer|delivery|deloitte|democrat|diamonds|discount|discover|download|engineer|ericsson|exchange|feedback|fidelity|firmdale|football|frontier|goodyear|grainger|graphics|hdfcbank|helsinki|holdings|hospital|infiniti|ipiranga|istanbul|jpmorgan|lighting|lundbeck|marriott|mckinsey|memorial|merckmsd|mortgage|observer|partners|pharmacy|pictures|plumbing|property|redstone|reliance|saarland|samsclub|security|services|shopping|softbank|software|stcgroup|supplies|training|vanguard|ventures|verisign|woodside|xn--90ae|xn--node|xn--p1ai|xn--qxam|yokohama|السعودية|abogado|academy|agakhan|alibaba|android|athleta|auction|audible|auspost|banamex|bauhaus|bestbuy|booking|brother|capital|caravan|careers|channel|charity|chintai|citadel|clubmed|college|cologne|company|compare|contact|cooking|corsica|country|coupons|courses|cricket|cruises|dentist|digital|domains|exposed|express|farmers|fashion|ferrari|ferrero|finance|fishing|fitness|flights|florist|flowers|forsale|frogans|fujitsu|gallery|genting|godaddy|grocery|guitars|hamburg|hangout|hitachi|holiday|hosting|hotmail|hyundai|ismaili|jewelry|juniper|kitchen|komatsu|lacaixa|lanxess|lasalle|latrobe|leclerc|limited|lincoln|markets|monster|netbank|netflix|network|neustar|okinawa|organic|origins|philips|pioneer|politie|realtor|recipes|rentals|reviews|rexroth|samsung|sandvik|schmidt|schwarz|science|shiksha|singles|staples|storage|support|surgery|systems|temasek|theater|theatre|tickets|toshiba|trading|walmart|wanggou|watches|weather|website|wedding|whoswho|windows|winners|yamaxun|youtube|zuerich|католик|البحرين|الجزائر|العليان|پاکستان|كاثوليك|இந்தியா|abbott|abbvie|africa|agency|airbus|airtel|alipay|alsace|alstom|amazon|anquan|aramco|author|bayern|beauty|berlin|bharti|bostik|boston|broker|camera|career|casino|center|chanel|chrome|church|circle|claims|clinic|coffee|comsec|condos|coupon|credit|cruise|dating|datsun|dealer|degree|dental|design|direct|doctor|dunlop|dupont|durban|emerck|energy|estate|events|expert|family|flickr|futbol|gallup|garden|george|giving|global|google|gratis|health|hermes|hiphop|hockey|hotels|hughes|imamat|insure|intuit|jaguar|joburg|juegos|kaufen|kindle|kosher|latino|lawyer|lefrak|living|locker|london|luxury|madrid|maison|makeup|market|mattel|mobile|monash|mormon|moscow|museum|nagoya|nissan|nissay|norton|nowruz|office|olayan|online|oracle|orange|otsuka|pfizer|photos|physio|pictet|quebec|racing|realty|reisen|repair|report|review|rogers|ryukyu|safety|sakura|sanofi|school|schule|search|secure|select|shouji|soccer|social|stream|studio|supply|suzuki|swatch|sydney|taipei|taobao|target|tattoo|tennis|tienda|tjmaxx|tkmaxx|toyota|travel|unicom|viajes|viking|villas|virgin|vision|voting|voyage|walter|webcam|xihuan|yachts|yandex|zappos|москва|онлайн|ابوظبي|ارامكو|الاردن|المغرب|امارات|فلسطين|مليسيا|भारतम्|இலங்கை|ファッション|actor|adult|aetna|amfam|amica|apple|archi|audio|autos|azure|baidu|beats|bible|bingo|black|boats|bosch|build|canon|cards|chase|cheap|cisco|citic|click|cloud|coach|codes|crown|cymru|dance|deals|delta|drive|dubai|earth|edeka|email|epson|faith|fedex|final|forex|forum|gallo|games|gifts|gives|glass|globo|gmail|green|gripe|group|gucci|guide|homes|honda|horse|house|hyatt|ikano|irish|jetzt|koeln|kyoto|lamer|lease|legal|lexus|lilly|loans|locus|lotte|lotto|mango|media|miami|money|movie|music|nexus|nikon|ninja|nokia|nowtv|omega|osaka|paris|parts|party|phone|photo|pizza|place|poker|praxi|press|prime|promo|quest|radio|rehab|reise|ricoh|rocks|rodeo|rugby|salon|sener|seven|sharp|shell|shoes|skype|sling|smart|smile|solar|space|sport|stada|store|study|style|sucks|swiss|tatar|tires|tirol|tmall|today|tokyo|tools|toray|total|tours|trade|trust|tunes|tushu|ubank|vegas|video|vodka|volvo|wales|watch|weber|weibo|works|world|xerox|yahoo|ישראל|ایران|بازار|بھارت|سودان|سورية|همراه|भारोत|संगठन|বাংলা|భారత్|ഭാരതം|嘉里大酒店|aarp|able|aero|akdn|ally|amex|arab|army|arpa|arte|asda|asia|audi|auto|baby|band|bank|bbva|beer|best|bike|bing|blog|blue|bofa|bond|book|buzz|cafe|call|camp|care|cars|casa|case|cash|cbre|cern|chat|citi|city|club|cool|coop|cyou|data|date|dclk|deal|dell|desi|diet|dish|docs|dvag|erni|fage|fail|fans|farm|fast|fido|film|fire|fish|flir|food|ford|free|fund|game|gbiz|gent|ggee|gift|gmbh|gold|golf|goog|guge|guru|hair|haus|hdfc|help|here|host|hsbc|icbc|ieee|imdb|immo|info|itau|java|jeep|jobs|jprs|kddi|kids|kiwi|kpmg|kred|land|lego|lgbt|lidl|life|like|limo|link|live|loan|love|ltda|luxe|maif|meet|meme|menu|mini|mint|mobi|moda|moto|name|navy|news|next|nico|nike|ollo|open|page|pars|pccw|pics|ping|pink|play|plus|pohl|porn|post|prod|prof|qpon|read|reit|rent|rest|rich|room|rsvp|ruhr|safe|sale|sarl|save|saxo|scot|seat|seek|sexy|shia|shop|show|silk|sina|site|skin|sncf|sohu|song|sony|spot|star|surf|talk|taxi|team|tech|teva|tiaa|tips|town|toys|tube|vana|visa|viva|vivo|vote|voto|wang|weir|wien|wiki|wine|work|xbox|yoga|zara|zero|zone|дети|сайт|بارت|بيتك|ڀارت|تونس|شبكة|عراق|عمان|موقع|भारत|ভারত|ভাৰত|ਭਾਰਤ|ભારત|ଭାରତ|ಭಾರತ|ලංකා|アマゾン|グーグル|クラウド|ポイント|组织机构|電訊盈科|香格里拉|aaa|abb|abc|aco|ads|aeg|afl|aig|anz|aol|app|art|aws|axa|bar|bbc|bbt|bcg|bcn|bet|bid|bio|biz|bms|bmw|bom|boo|bot|box|buy|bzh|cab|cal|cam|car|cat|cba|cbn|ceo|cfa|cfd|com|cpa|crs|dad|day|dds|dev|dhl|diy|dnp|dog|dot|dtv|dvr|eat|eco|edu|esq|eus|fan|fit|fly|foo|fox|frl|ftr|fun|fyi|gal|gap|gay|gdn|gea|gle|gmo|gmx|goo|gop|got|gov|hbo|hiv|hkt|hot|how|ibm|ice|icu|ifm|inc|ing|ink|int|ist|itv|jcb|jio|jll|jmp|jnj|jot|joy|kfh|kia|kim|kpn|krd|lat|law|lds|llc|llp|lol|lpl|ltd|man|map|mba|med|men|mil|mit|mlb|mls|mma|moe|moi|mom|mov|msd|mtn|mtr|nab|nba|nec|net|new|nfl|ngo|nhk|now|nra|nrw|ntt|nyc|obi|one|ong|onl|ooo|org|ott|ovh|pay|pet|phd|pid|pin|pnc|pro|pru|pub|pwc|red|ren|ril|rio|rip|run|rwe|sap|sas|sbi|sbs|scb|sew|sex|sfr|ski|sky|soy|spa|srl|stc|tab|tax|tci|tdk|tel|thd|tjx|top|trv|tui|tvs|ubs|uno|uol|ups|vet|vig|vin|vip|wed|win|wme|wow|wtc|wtf|xin|xxx|xyz|you|yun|zip|бел|ком|қаз|мкд|мон|орг|рус|срб|укр|հայ|קום|عرب|قطر|كوم|مصر|कॉम|नेट|คอม|ไทย|ລາວ|ストア|セール|みんな|中文网|亚马逊|天主教|我爱你|新加坡|淡马锡|飞利浦|ac|ad|ae|af|ag|ai|al|am|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|ελ|ευ|бг|ею|рф|გე|닷넷|닷컴|삼성|한국|コム|世界|中信|中国|中國|企业|佛山|信息|健康|八卦|公司|公益|台湾|台灣|商城|商店|商标|嘉里|在线|大拿|娱乐|家電|广东|微博|慈善|手机|招聘|政务|政府|新闻|时尚|書籍|机构|游戏|澳門|点看|移动|网址|网店|网站|网络|联通|谷歌|购物|通販|集团|食品|餐厅|香港)$/,Ce=/https?:\/\//i,Mt=new RegExp("^"+Ce.source,"i"),Lt=/^(javascript|vbscript):/i,Ht=/^[A-Za-z][-.+A-Za-z0-9]*:(\/\/)?([^:/]*)/,_t=/^(?:\/\/)?([^/#?:]+)/,Q=G;function Be(e){return G(e)||x(e)||e===43||e===45||e===46}var z=B;function ke(e){return e===95||z(e)}function Ve(e){return B(e)||Nt(e)||qe(e)}function ve(e){return e===47||e===63||e===35}function Ue(e){return It.test(e.toLowerCase())}function Ot(e){if(Lt.test(e))return!1;var t=e.match(Ht);if(!t)return!1;var n=!!t[1],s=t[2];return n?!0:!(s.indexOf(".")===-1||!/[A-Za-z]/.test(s))}function $t(e){var t=e.match(_t);if(!t)return!1;var n=t[0],s=n.split(".");if(s.length<2)return!1;var i=s[s.length-1];return!!Ue(i)}var Rt=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,zt=/[:/?#]/;function Dt(e){var t=e.split(zt,1)[0];return Rt.test(t)}var qt=/^(https?:\/\/)?(?:www\.)?/i,Ct=/^\/\//,Bt=function(e){X(t,e);function t(n){var s=e.call(this,n)||this;return s.type="url",s.url="",s.urlMatchType="scheme",s.protocolRelativeMatch=!1,s.stripPrefix={scheme:!0,www:!0},s.stripTrailingSlash=!0,s.decodePercentEncoding=!0,s.protocolPrepended=!1,s.urlMatchType=n.urlMatchType,s.url=n.url,s.protocolRelativeMatch=n.protocolRelativeMatch,s.stripPrefix=n.stripPrefix,s.stripTrailingSlash=n.stripTrailingSlash,s.decodePercentEncoding=n.decodePercentEncoding,s}return t.prototype.getType=function(){return"url"},t.prototype.getUrlMatchType=function(){return this.urlMatchType},t.prototype.getUrl=function(){var n=this.url;return!this.protocolRelativeMatch&&this.urlMatchType!=="scheme"&&!this.protocolPrepended&&(n=this.url="http://"+n,this.protocolPrepended=!0),n},t.prototype.getAnchorHref=function(){var n=this.getUrl();return n.replace(/&amp;/g,"&")},t.prototype.getAnchorText=function(){var n=this.getMatchedText();return this.protocolRelativeMatch&&(n=Wt(n)),this.stripPrefix.scheme&&(n=Vt(n)),this.stripPrefix.www&&(n=Ut(n)),this.stripTrailingSlash&&(n=Ft(n)),this.decodePercentEncoding&&(n=Gt(n)),n},t}(Y);function Vt(e){return e.replace(Mt,"")}function Ut(e){return e.includes("www.")?e.replace(qt,"$1"):e}function Wt(e){return e.replace(Ct,"")}function Ft(e){return e.charAt(e.length-1)==="/"&&(e=e.slice(0,-1)),e}function Gt(e){var t=e.replace(/%(?:22|26|27|3C|3E)/gi,function(n){return n==="%22"?"&quot;":n==="%26"?"&amp;":n==="%27"?"&#39;":n==="%3C"||n==="%3c"?"&lt;":"&gt;"});if(t.includes("%"))try{return decodeURIComponent(t)}catch{}return t}var Kt=/^mailto:/i,We=B;function xe(e){return We(e)||jt(e)}function Qt(e){var t=e.split(".").pop();return Ue(t)}var Xt=function(e){X(t,e);function t(n){var s=e.call(this,n)||this;return s.type="email",s.email="",s.email=n.email,s}return t.prototype.getType=function(){return"email"},t.prototype.getEmail=function(){return this.email},t.prototype.getAnchorHref=function(){return"mailto:"+this.email},t.prototype.getAnchorText=function(){return this.email},t}(Y);function Fe(e){return e===95||B(e)}function Yt(e){return e.length<=140}var Zt=["twitter","facebook","instagram","tiktok","youtube"],Jt=function(e){X(t,e);function t(n){var s=e.call(this,n)||this;return s.type="hashtag",s.serviceName="twitter",s.hashtag="",s.serviceName=n.serviceName,s.hashtag=n.hashtag,s}return t.prototype.getType=function(){return"hashtag"},t.prototype.getServiceName=function(){return this.serviceName},t.prototype.getHashtag=function(){return this.hashtag},t.prototype.getAnchorHref=function(){var n=this.serviceName,s=this.hashtag;switch(n){case"twitter":return"https://twitter.com/hashtag/"+s;case"facebook":return"https://www.facebook.com/hashtag/"+s;case"instagram":return"https://instagram.com/explore/tags/"+s;case"tiktok":return"https://www.tiktok.com/tag/"+s;case"youtube":return"https://youtube.com/hashtag/"+s;default:q(n)}},t.prototype.getAnchorText=function(){return"#"+this.hashtag},t.prototype.getCssClassSuffixes=function(){var n=e.prototype.getCssClassSuffixes.call(this),s=this.getServiceName();return s&&n.push(s),n},t}(Y),en={twitter:/^@\w{1,15}$/,instagram:/^@[_\w]{1,30}$/,soundcloud:/^@[-a-z0-9_]{3,25}$/,tiktok:/^@[.\w]{1,23}[\w]$/,youtube:/^@[-.·\w]{3,30}$/};function Ge(e){return e===45||e===46||e===95||G(e)||x(e)}function tn(e,t){var n=en[t];return n.test(e)}var nn=["twitter","instagram","soundcloud","tiktok","youtube"],sn=function(e){X(t,e);function t(n){var s=e.call(this,n)||this;return s.type="mention",s.serviceName="twitter",s.mention="",s.mention=n.mention,s.serviceName=n.serviceName,s}return t.prototype.getType=function(){return"mention"},t.prototype.getMention=function(){return this.mention},t.prototype.getServiceName=function(){return this.serviceName},t.prototype.getAnchorHref=function(){switch(this.serviceName){case"twitter":return"https://twitter.com/"+this.mention;case"instagram":return"https://instagram.com/"+this.mention;case"soundcloud":return"https://soundcloud.com/"+this.mention;case"tiktok":return"https://www.tiktok.com/@"+this.mention;case"youtube":return"https://youtube.com/@"+this.mention;default:q(this.serviceName)}},t.prototype.getAnchorText=function(){return"@"+this.mention},t.prototype.getCssClassSuffixes=function(){var n=e.prototype.getCssClassSuffixes.call(this),s=this.getServiceName();return s&&n.push(s),n},t}(Y),an=/[-. ()]/,rn=/(?:(?:(?:(\+)?\d{1,3}[-. ]?)?\(?\d{3}\)?[-. ]?\d{3}[-. ]?\d{4})|(?:(\+)(?:9[976]\d|8[987530]\d|6[987]\d|5[90]\d|42\d|3[875]\d|2[98654321]\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|4[987654310]|3[9643210]|2[70]|7|1)[-. ]?(?:\d[-. ]?){6,12}\d+))([,;]+[0-9]+#?)*/,on=/(0([1-9]-?[1-9]\d{3}|[1-9]{2}-?\d{3}|[1-9]{2}\d{1}-?\d{2}|[1-9]{2}\d{2}-?\d{1})-?\d{4}|0[789]0-?\d{4}-?\d{4}|050-?\d{4}-?\d{4})/,ln=new RegExp("^".concat(rn.source,"|").concat(on.source,"$"));function Ke(e){return e===45||e===46||e===32}function Te(e){return e===44||e===59}function un(e){var t=e.charAt(0)==="+"||an.test(e);return t&&ln.test(e)}var fn=function(e){X(t,e);function t(n){var s=e.call(this,n)||this;return s.type="phone",s.number="",s.plusSign=!1,s.number=n.number,s.plusSign=n.plusSign,s}return t.prototype.getType=function(){return"phone"},t.prototype.getPhoneNumber=function(){return this.number},t.prototype.getNumber=function(){return this.getPhoneNumber()},t.prototype.getAnchorHref=function(){return"tel:"+(this.plusSign?"+":"")+this.number},t.prototype.getAnchorText=function(){return this.matchedText},t}(Y),dn=function(){function e(t,n){this.charIdx=0,this.matches=[],this._stateMachines=[],this.schemeUrlMachinesCount=0,this.text=t,this.tagBuilder=n.tagBuilder,this.stripPrefix=n.stripPrefix,this.stripTrailingSlash=n.stripTrailingSlash,this.decodePercentEncoding=n.decodePercentEncoding,this.hashtagServiceName=n.hashtagServiceName,this.mentionServiceName=n.mentionServiceName}return Object.defineProperty(e.prototype,"stateMachines",{get:function(){return this._stateMachines},enumerable:!1,configurable:!0}),e.prototype.addMachine=function(t){this._stateMachines.push(t),He(t)&&this.schemeUrlMachinesCount++},e.prototype.removeMachine=function(t){this._stateMachines=this._stateMachines.filter(function(n){return n!==t}),He(t)&&this.schemeUrlMachinesCount--},e.prototype.hasSchemeUrlMachine=function(){return this.schemeUrlMachinesCount>0},e}();function hn(e,t){for(var n=new dn(e,t);n.charIdx<n.text.length;n.charIdx++){var s=e.charAt(n.charIdx),i=e.charCodeAt(n.charIdx);if(n.stateMachines.length===0)ne(n,s,i);else{for(var a=n.stateMachines.length-1;a>=0;a--){var r=n.stateMachines[a];switch(r.state){case 11:yn(n,r,i);break;case 12:wn(n,r,i);break;case 0:pn(n,r,i);break;case 1:gn(n,r,i);break;case 2:mn(n,r,i);break;case 3:bn(n,r,i);break;case 4:cn(n,r,s,i);break;case 5:kn(n,r,i);break;case 6:vn(n,r,s,i);break;case 7:xn(n,r,s,i);break;case 13:Tn(n,r,i);break;case 14:Sn(n,r,i);break;case 8:En(n,r,i);break;case 9:Pn(n,r,i);break;case 10:jn(n,r,i);break;case 15:Nn(n,r,s,i);break;case 16:An(n,r,s,i);break;case 17:In(n,r,s,i);break;case 18:Mn(n,r,s,i);break;case 19:Ln(n,r,s,i);break;case 20:Hn(n,r,i);break;case 21:_n(n,r,i);break;case 22:V(n,r,i);break;case 23:On(n,r,i);break;case 24:$n(n,r,i);break;case 25:Rn(n,r,i);break;case 26:zn(n,r,i);break;case 27:Dn(n,r,i);break;case 28:qn(n,r,i);break;case 29:Cn(n,r,i);break;case 30:Bn(n,r,i);break;case 31:Vn(n,r,i);break;case 32:Wn(n,r,s,i);break;case 33:Fn(n,r,i);break;case 34:Gn(n,r,i);break;case 35:Kn(n,r,i);break;case 36:Qn(n,r,s,i);break;case 37:Un(n,r,s,i);break;case 38:Xn(n,r,s,i);break;case 39:Yn(n,r,s,i);break;case 40:Zn(n,r,i);break;case 41:Jn(n,r,i);break;default:q(r.state)}}if(!n.hasSchemeUrlMachine()&&n.charIdx>0&&Q(i)){var u=n.text.charCodeAt(n.charIdx-1);Q(u)||n.addMachine(se(n.charIdx,0))}}}for(var o=n.stateMachines.length-1;o>=0;o--)n.stateMachines.forEach(function(d){return c(n,d)});return n.matches}function ne(e,t,n){var s=e.charIdx;if(n===35)e.addMachine(is(s,28));else if(n===64)e.addMachine(as(s,30));else if(n===47)e.addMachine(me(s,11));else if(n===43)e.addMachine(fe(s,37));else if(n===40)e.addMachine(fe(s,32));else{if(x(n)&&(e.addMachine(fe(s,38)),e.addMachine(ns(s,13))),We(n)){var i=t.toLowerCase()==="m"?15:22;e.addMachine(ss(s,i))}Q(n)&&e.addMachine(se(s,0)),B(n)&&e.addMachine(me(s,5))}}function pn(e,t,n){n===58?t.state=2:n===45?t.state=1:Be(n)||e.removeMachine(t)}function gn(e,t,n){var s=e.charIdx;n===45||(n===47?(e.removeMachine(t),e.addMachine(me(s,11))):Be(n)?t.state=0:e.removeMachine(t))}function mn(e,t,n){var s=e.charIdx;n===47?t.state=3:n===46?e.removeMachine(t):z(n)?(t.state=5,Q(n)&&e.addMachine(se(s,0))):e.removeMachine(t)}function bn(e,t,n){n===47?t.state=4:Ve(n)?(t.state=10,t.acceptStateReached=!0):c(e,t)}function cn(e,t,n,s){s===47?(t.state=10,t.acceptStateReached=!0):z(s)?(t.state=5,t.acceptStateReached=!0):e.removeMachine(t)}function yn(e,t,n){n===47?t.state=12:e.removeMachine(t)}function wn(e,t,n){z(n)?t.state=5:e.removeMachine(t)}function kn(e,t,n){n===46?t.state=7:n===45?t.state=6:n===58?t.state=8:ve(n)?t.state=10:ke(n)||c(e,t)}function vn(e,t,n,s){s===45||(s===46?c(e,t):z(s)?t.state=5:c(e,t))}function xn(e,t,n,s){s===46?c(e,t):z(s)?(t.state=5,t.acceptStateReached=!0):c(e,t)}function Tn(e,t,n){n===46?t.state=14:n===58?t.state=8:x(n)||(ve(n)?t.state=10:B(n)?e.removeMachine(t):c(e,t))}function Sn(e,t,n){x(n)?(t.octetsEncountered++,t.octetsEncountered===4&&(t.acceptStateReached=!0),t.state=13):c(e,t)}function En(e,t,n){x(n)?t.state=9:c(e,t)}function Pn(e,t,n){x(n)||(ve(n)?t.state=10:c(e,t))}function jn(e,t,n){Ve(n)||c(e,t)}function Nn(e,t,n,s){n.toLowerCase()==="a"?t.state=16:V(e,t,s)}function An(e,t,n,s){n.toLowerCase()==="i"?t.state=17:V(e,t,s)}function In(e,t,n,s){n.toLowerCase()==="l"?t.state=18:V(e,t,s)}function Mn(e,t,n,s){n.toLowerCase()==="t"?t.state=19:V(e,t,s)}function Ln(e,t,n,s){n.toLowerCase()==="o"?t.state=20:V(e,t,s)}function Hn(e,t,n){n===58?t.state=21:V(e,t,n)}function _n(e,t,n){xe(n)?t.state=22:e.removeMachine(t)}function V(e,t,n){n===46?t.state=23:n===64?t.state=24:xe(n)?t.state=22:e.removeMachine(t)}function On(e,t,n){n===46||n===64?e.removeMachine(t):xe(n)?t.state=22:e.removeMachine(t)}function $n(e,t,n){z(n)?t.state=25:e.removeMachine(t)}function Rn(e,t,n){n===46?t.state=27:n===45?t.state=26:ke(n)||c(e,t)}function zn(e,t,n){n===45||n===46?c(e,t):ke(n)?t.state=25:c(e,t)}function Dn(e,t,n){n===46||n===45?c(e,t):z(n)?(t.state=25,t.acceptStateReached=!0):c(e,t)}function qn(e,t,n){Fe(n)?(t.state=29,t.acceptStateReached=!0):e.removeMachine(t)}function Cn(e,t,n){Fe(n)||c(e,t)}function Bn(e,t,n){Ge(n)?(t.state=31,t.acceptStateReached=!0):e.removeMachine(t)}function Vn(e,t,n){Ge(n)||(B(n)?e.removeMachine(t):c(e,t))}function Un(e,t,n,s){x(s)?t.state=38:(e.removeMachine(t),ne(e,n,s))}function Wn(e,t,n,s){x(s)?t.state=33:e.removeMachine(t),ne(e,n,s)}function Fn(e,t,n){x(n)?t.state=34:e.removeMachine(t)}function Gn(e,t,n){x(n)?t.state=35:e.removeMachine(t)}function Kn(e,t,n){n===41?t.state=36:e.removeMachine(t)}function Qn(e,t,n,s){x(s)?t.state=38:Ke(s)?t.state=39:e.removeMachine(t)}function Xn(e,t,n,s){var i=e.charIdx;t.acceptStateReached=!0,Te(s)?t.state=40:s===35?t.state=41:x(s)||(s===40?t.state=32:Ke(s)?t.state=39:(c(e,t),Q(s)&&e.addMachine(se(i,0))))}function Yn(e,t,n,s){x(s)?t.state=38:s===40?t.state=32:(c(e,t),ne(e,n,s))}function Zn(e,t,n){Te(n)||(n===35?t.state=41:x(n)?t.state=38:c(e,t))}function Jn(e,t,n){Te(n)?t.state=40:x(n)?e.removeMachine(t):c(e,t)}function c(e,t){var n=e.matches,s=e.text,i=e.charIdx,a=e.tagBuilder,r=e.stripPrefix,u=e.stripTrailingSlash,o=e.decodePercentEncoding,d=e.hashtagServiceName,g=e.mentionServiceName;if(e.removeMachine(t),!!t.acceptStateReached){var h=t.startIdx,f=s.slice(t.startIdx,i);switch(f=ts(f),t.type){case 0:{var y=s.charCodeAt(t.startIdx-1);if(y===64)return;switch(t.matchType){case 0:{var T=Ce.exec(f);if(T&&(h=h+T.index,f=f.slice(T.index)),!Ot(f))return;break}case 1:{if(!$t(f))return;break}case 2:{if(!Dt(f))return;break}default:q(t)}n.push(new Bt({tagBuilder:a,matchedText:f,offset:h,urlMatchType:es(t.matchType),url:f,protocolRelativeMatch:f.slice(0,2)==="//",stripPrefix:r,stripTrailingSlash:u,decodePercentEncoding:o}));break}case 1:{Qt(f)&&n.push(new Xt({tagBuilder:a,matchedText:f,offset:h,email:f.replace(Kt,"")}));break}case 2:{Yt(f)&&n.push(new Jt({tagBuilder:a,matchedText:f,offset:h,serviceName:d,hashtag:f.slice(1)}));break}case 3:{tn(f,g)&&n.push(new sn({tagBuilder:a,matchedText:f,offset:h,serviceName:g,mention:f.slice(1)}));break}case 4:{if(f=f.replace(/ +$/g,""),un(f)){var A=f.replace(/[^0-9,;#]/g,"");n.push(new fn({tagBuilder:a,matchedText:f,offset:h,number:A,plusSign:f.charAt(0)==="+"}))}break}default:q(t)}}}function es(e){switch(e){case 0:return"scheme";case 1:return"tld";case 2:return"ipV4";default:q(e)}}var Le={")":"(","}":"{","]":"["};function ts(e){for(var t={"(":0,"{":0,"[":0},n=0;n<e.length;n++){var s=e.charAt(n),i=e.charCodeAt(n);At(i)?t[s]++:Me(i)&&t[Le[s]]--}for(var a=e.length-1;a>=0;){var s=e.charAt(a),i=e.charCodeAt(a);if(Me(i)){var r=Le[s];if(t[r]<0)t[r]++,a--;else break}else if(qe(i))a--;else break}return e.slice(0,a+1)}function se(e,t){return{type:0,startIdx:e,state:t,acceptStateReached:!1,matchType:0}}function me(e,t){return{type:0,startIdx:e,state:t,acceptStateReached:!1,matchType:1}}function ns(e,t){return{type:0,startIdx:e,state:t,acceptStateReached:!1,matchType:2,octetsEncountered:1}}function ss(e,t){return{type:1,startIdx:e,state:t,acceptStateReached:!1}}function is(e,t){return{type:2,startIdx:e,state:t,acceptStateReached:!1}}function as(e,t){return{type:3,startIdx:e,state:t,acceptStateReached:!1}}function fe(e,t){return{type:4,startIdx:e,state:t,acceptStateReached:!1}}function He(e){return e.type===0&&e.matchType===0}var I=function(){function e(t){t===void 0&&(t={}),this.idx=t.idx!==void 0?t.idx:-1,this.type=t.type||"tag",this.name=t.name||"",this.isOpening=!!t.isOpening,this.isClosing=!!t.isClosing}return e}(),Se=new I,rs=function(){function e(t,n){this.charIdx=0,this.state=0,this.currentDataIdx=0,this.currentTag=Se,this.html=t,this.callbacks=n}return e}();function os(e,t){for(var n=new rs(e,t),s=e.length;n.charIdx<s;){var i=e.charAt(n.charIdx),a=e.charCodeAt(n.charIdx);switch(n.state){case 0:ls(n,i);break;case 1:us(n,i,a);break;case 2:ds(n,i,a);break;case 3:fs(n,i,a);break;case 4:hs(n,i,a);break;case 5:ps(n,i,a);break;case 6:gs(n,i,a);break;case 7:ms(n,i,a);break;case 8:bs(n,i);break;case 9:cs(n,i);break;case 10:ys(n,i,a);break;case 11:ws(n,i,a);break;case 12:ks(n,i);break;case 13:vs(n);break;case 14:xs(n,i);break;case 15:Ts(n,i);break;case 16:Ss(n,i);break;case 17:Es(n,i);break;case 18:Ps(n,i);break;case 19:js(n,i);break;case 20:Ns(n,i);break;default:q(n.state)}n.charIdx++}n.currentDataIdx<n.charIdx&&As(n)}function ls(e,t){t==="<"&&M(e)}function us(e,t,n){t==="!"?e.state=13:t==="/"?(e.state=2,e.currentTag=new I(v(v({},e.currentTag),{isClosing:!0}))):t==="<"?M(e):G(n)?(e.state=3,e.currentTag=new I(v(v({},e.currentTag),{isOpening:!0}))):(e.state=0,e.currentTag=Se)}function fs(e,t,n){C(n)?(e.currentTag=new I(v(v({},e.currentTag),{name:de(e)})),e.state=4):t==="<"?M(e):t==="/"?(e.currentTag=new I(v(v({},e.currentTag),{name:de(e)})),e.state=12):t===">"?(e.currentTag=new I(v(v({},e.currentTag),{name:de(e)})),L(e)):!G(n)&&!x(n)&&t!==":"&&N(e)}function ds(e,t,n){t===">"?N(e):G(n)?e.state=3:N(e)}function hs(e,t,n){C(n)||(t==="/"?e.state=12:t===">"?L(e):t==="<"?M(e):t==="="||we(n)||Pt(n)?N(e):e.state=5)}function ps(e,t,n){C(n)?e.state=6:t==="/"?e.state=12:t==="="?e.state=7:t===">"?L(e):t==="<"?M(e):we(n)&&N(e)}function gs(e,t,n){C(n)||(t==="/"?e.state=12:t==="="?e.state=7:t===">"?L(e):t==="<"?M(e):we(n)?N(e):e.state=5)}function ms(e,t,n){C(n)||(t==='"'?e.state=8:t==="'"?e.state=9:/[>=`]/.test(t)?N(e):t==="<"?M(e):e.state=10)}function bs(e,t){t==='"'&&(e.state=11)}function cs(e,t){t==="'"&&(e.state=11)}function ys(e,t,n){C(n)?e.state=4:t===">"?L(e):t==="<"&&M(e)}function ws(e,t,n){C(n)?e.state=4:t==="/"?e.state=12:t===">"?L(e):t==="<"?M(e):(e.state=4,Is(e))}function ks(e,t){t===">"?(e.currentTag=new I(v(v({},e.currentTag),{isClosing:!0})),L(e)):N(e)}function vs(e){var t=e.html,n=e.charIdx;t.slice(n,n+2)==="--"?(e.charIdx++,e.currentTag=new I(v(v({},e.currentTag),{type:"comment"})),e.state=14):t.slice(n,n+7).toUpperCase()==="DOCTYPE"?(e.charIdx+=6,e.currentTag=new I(v(v({},e.currentTag),{type:"doctype"})),e.state=20):N(e)}function xs(e,t){t==="-"?e.state=15:t===">"?N(e):e.state=16}function Ts(e,t){t==="-"?e.state=18:t===">"?N(e):e.state=16}function Ss(e,t){t==="-"&&(e.state=17)}function Es(e,t){t==="-"?e.state=18:e.state=16}function Ps(e,t){t===">"?L(e):t==="!"?e.state=19:t==="-"||(e.state=16)}function js(e,t){t==="-"?e.state=17:t===">"?L(e):e.state=16}function Ns(e,t){t===">"?L(e):t==="<"&&M(e)}function N(e){e.state=0,e.currentTag=Se}function M(e){e.state=1,e.currentTag=new I({idx:e.charIdx})}function L(e){var t=e.html.slice(e.currentDataIdx,e.currentTag.idx);t&&e.callbacks.onText(t,e.currentDataIdx);var n=e.currentTag;n.type==="comment"?e.callbacks.onComment(n.idx):n.type==="doctype"?e.callbacks.onDoctype(n.idx):(n.isOpening&&e.callbacks.onOpenTag(n.name,n.idx),n.isClosing&&e.callbacks.onCloseTag(n.name,n.idx)),N(e),e.currentDataIdx=e.charIdx+1}function As(e){var t=e.html.slice(e.currentDataIdx,e.charIdx);e.callbacks.onText(t,e.currentDataIdx),e.currentDataIdx=e.charIdx+1}function de(e){var t=e.currentTag.idx+(e.currentTag.isClosing?2:1);return e.html.slice(t,e.charIdx).toLowerCase()}function Is(e){e.charIdx--}var Ms=function(){function e(t){t===void 0&&(t={}),this.version=e.version,this.urls={},this.email=!0,this.phone=!0,this.hashtag=!1,this.mention=!1,this.newWindow=!0,this.stripPrefix={scheme:!0,www:!0},this.stripTrailingSlash=!0,this.decodePercentEncoding=!0,this.truncate={length:0,location:"end"},this.className="",this.replaceFn=null,this.context=void 0,this.sanitizeHtml=!1,this.tagBuilder=null,this.urls=Ls(t.urls),this.email=j(t.email)?t.email:this.email,this.phone=j(t.phone)?t.phone:this.phone,this.hashtag=t.hashtag||this.hashtag,this.mention=t.mention||this.mention,this.newWindow=j(t.newWindow)?t.newWindow:this.newWindow,this.stripPrefix=Hs(t.stripPrefix),this.stripTrailingSlash=j(t.stripTrailingSlash)?t.stripTrailingSlash:this.stripTrailingSlash,this.decodePercentEncoding=j(t.decodePercentEncoding)?t.decodePercentEncoding:this.decodePercentEncoding,this.sanitizeHtml=t.sanitizeHtml||!1;var n=this.mention;if(n!==!1&&nn.indexOf(n)===-1)throw new Error("invalid `mention` cfg '".concat(n,"' - see docs"));var s=this.hashtag;if(s!==!1&&Zt.indexOf(s)===-1)throw new Error("invalid `hashtag` cfg '".concat(s,"' - see docs"));this.truncate=_s(t.truncate),this.className=t.className||this.className,this.replaceFn=t.replaceFn||this.replaceFn,this.context=t.context||this}return e.link=function(t,n){var s=new e(n);return s.link(t)},e.parse=function(t,n){var s=new e(n);return s.parse(t)},e.prototype.parse=function(t){var n=this,s=["a","style","script"],i=0,a=[];return os(t,{onOpenTag:function(r){s.indexOf(r)>=0&&i++},onText:function(r,u){if(i===0){var o=/(&nbsp;|&#160;|&lt;|&#60;|&gt;|&#62;|&quot;|&#34;|&#39;)/gi,d=r.split(o),g=u;d.forEach(function(h,f){if(f%2===0){var y=n.parseText(h,g);a.push.apply(a,ct([],bt(y),!1))}g+=h.length})}},onCloseTag:function(r){s.indexOf(r)>=0&&(i=Math.max(i-1,0))},onComment:function(){},onDoctype:function(){}}),a=this.compactMatches(a),a=this.removeUnwantedMatches(a),a},e.prototype.compactMatches=function(t){t.sort(Os);for(var n=0;n<t.length-1;){var s=t[n],i=s.getOffset(),a=s.getMatchedText().length;if(n+1<t.length&&t[n+1].getOffset()===i){var r=t[n+1].getMatchedText().length>a?n:n+1;t.splice(r,1);continue}n++}return t},e.prototype.removeUnwantedMatches=function(t){return this.hashtag||D(t,function(n){return n.getType()==="hashtag"}),this.email||D(t,function(n){return n.getType()==="email"}),this.phone||D(t,function(n){return n.getType()==="phone"}),this.mention||D(t,function(n){return n.getType()==="mention"}),this.urls.schemeMatches||D(t,function(n){return n.getType()==="url"&&n.getUrlMatchType()==="scheme"}),this.urls.tldMatches||D(t,function(n){return n.getType()==="url"&&n.getUrlMatchType()==="tld"}),this.urls.ipV4Matches||D(t,function(n){return n.getType()==="url"&&n.getUrlMatchType()==="ipV4"}),t},e.prototype.parseText=function(t,n){n=n||0;for(var s=hn(t,{tagBuilder:this.getTagBuilder(),stripPrefix:this.stripPrefix,stripTrailingSlash:this.stripTrailingSlash,decodePercentEncoding:this.decodePercentEncoding,hashtagServiceName:this.hashtag,mentionServiceName:this.mention||"twitter"}),i=0,a=s.length;i<a;i++)s[i].setOffset(n+s[i].getOffset());return s},e.prototype.link=function(t){if(!t)return"";this.sanitizeHtml&&(t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"));for(var n=this.parse(t),s=new Array(n.length*2+1),i=0,a=0,r=n.length;a<r;a++){var u=n[a];s.push(t.substring(i,u.getOffset())),s.push(this.createMatchReturnVal(u)),i=u.getOffset()+u.getMatchedText().length}return s.push(t.substring(i)),s.join("")},e.prototype.createMatchReturnVal=function(t){var n;if(this.replaceFn&&(n=this.replaceFn.call(this.context,t)),typeof n=="string")return n;if(n===!1)return t.getMatchedText();if(n instanceof De)return n.toAnchorString();var s=t.buildTag();return s.toAnchorString()},e.prototype.getTagBuilder=function(){var t=this.tagBuilder;return t||(t=this.tagBuilder=new Et({newWindow:this.newWindow,truncate:this.truncate,className:this.className})),t},e.version=yt,e}();function Ls(e){return e==null&&(e=!0),j(e)?{schemeMatches:e,tldMatches:e,ipV4Matches:e}:{schemeMatches:j(e.schemeMatches)?e.schemeMatches:!0,tldMatches:j(e.tldMatches)?e.tldMatches:!0,ipV4Matches:j(e.ipV4Matches)?e.ipV4Matches:!0}}function Hs(e){return e==null&&(e=!0),j(e)?{scheme:e,www:e}:{scheme:j(e.scheme)?e.scheme:!0,www:j(e.www)?e.www:!0}}function _s(e){return typeof e=="number"?{length:e,location:"end"}:v({length:Number.POSITIVE_INFINITY,location:"end"},e)}function Os(e,t){return e.getOffset()-t.getOffset()}const ie=async(e,t)=>{const n=new E(e.tab.containerEl,e.tab.plugin).setName(e.mod.name).setDesc(e.mod.description);return e.mod.info&&n.addInfo(await e.mod.info()),t&&n.addModal(t),{status:n}},K=async(e,t)=>{(await ie(e,t)).status.addDropdown(s=>{s.addOptions(Pi).setValue(e.mod.settings.status).onChange(async i=>{e.mod.settings.status=i,await e.tab.saveSettings()})})},ae=async(e,t)=>{(await ie(e,t)).status.addToggle(s=>{s.setValue(e.mod.settings.status==="on").onChange(async i=>{e.mod.settings.status=i?"on":"off",await e.tab.saveSettings()})})},Qe={status:"on",options:{urls:!0,email:!0,phone:!0}},$s=async e=>{const{plugin:t}=e.tab,n=e.mod.settings;K(e,s=>{const{contentEl:i}=s;s.setTitle(e.mod.name),new E(i,t).setName("URLs").setDesc("Auto-link websites and other URLs.").addToggle(a=>{a.setValue(n.options.urls).onChange(async r=>{n.options.urls=r,await e.tab.saveSettings()})}),new E(i,t).setName("Email").setDesc("Auto-link email addresses using the mailto scheme.").addToggle(a=>{a.setValue(n.options.email).onChange(async r=>{n.options.email=r,await e.tab.saveSettings()})}),new E(i,t).setName("Phone").setDesc("Auto-link phone numbers using the tel scheme.").addToggle(a=>{a.setValue(n.options.phone).onChange(async r=>{n.options.phone=r,await e.tab.saveSettings()})})})};function Rs(e,t){const n=structuredClone(t.mod.settings);t.force&&(n.options=Qe.options),e.el.findAll(".token.comment").forEach(s=>{s.innerHTML=Ms.link(s.innerHTML,{...n.options,stripPrefix:!1})})}const H=(e,t)=>{const n=t.settings.mods[e.id];t.addCommand({id:`${e.id}:toggle`,name:`Toggle ${e.name.toLowerCase()}`,callback:async()=>{n.status=n.status==="off"?"on":"off",await t.saveSettings()}})},zs={id:"autolinker",aliases:["link","al"],name:"Autolinker",description:"Turn URLs, emails, and phone numbers into clickable links within comments.",info:async()=>(await Promise.resolve().then(()=>_i)).default,scope:"all",hooks:["complete"],run:Rs,commands:H,settings:Qe,settingTab:$s};function be(e,t=""){return`<span class="${["line",t].join(" ").trim()}"><span class="line-start"><span class="line-gutter"></span></span><span class="line-middle">${e}</span><span class="line-end"></span></span>`}function Ds(e,t){const n=t.mod.settings;e.el.innerHTML=ee(e.el.innerHTML).map(s=>be(s||" ")).join(""),n.options.sticky&&(e.el.dataset.lineSticky="")}const Xe={status:"on",options:{sticky:!0}},qs=async e=>{const{plugin:t}=e.tab,n=e.mod.settings;n.options||(n.options=Xe.options),ie(e,s=>{const{contentEl:i}=s;s.setTitle(e.mod.name),new E(i,t).setName("Sticky").setDesc("Keep the line start gutter fixed when scrolling horizontally.").addToggle(a=>{a.setValue(n.options.sticky).onChange(async r=>{n.options.sticky=r,await e.tab.saveSettings()})})})};function W(e,t){var s;const n=ye(t);return(s=e.find(".line-gutter"))==null||s.appendChild(n),n}const Cs={id:"line",aliases:[],name:"Line",description:"Wrap each line with start and end gutters within code blocks.",dependent:!0,scope:"block",hooks:["complete"],run:Ds,settings:Xe,settingTab:qs},_e=2e3;function Bs(e,t){const n=t.mod.settings;function s(u,o){o||(o=u),navigator.clipboard.writeText(u.innerText).then(()=>{setTimeout(()=>k.displayTooltip(o,"Copied!"),100)})}function i(u){const o=u.parentElement,d=o.createEl("button");d.className="copy-code-button",k.setIcon(d,"copy"),n.options.tooltip&&k.setTooltip(d,"Copy"),d.addEventListener("click",()=>{s(u,d),k.setIcon(d,"checkmark"),setTimeout(()=>k.setIcon(d,"copy"),_e)}),o.addEventListener("click",()=>{var h;const g=o.closest(".cm-embed-block");g&&((h=g.find(".edit-block-button"))==null||h.click())}),n.options.line&&a(u)}function a(u){u.findAll(".line").forEach(o=>{if(!o.innerText.trim()||o.hasClass("meta"))return;const d=o.find(".line-start"),g=W(d,"clipboard");n.options.tooltip&&k.setTooltip(d,"Copy Line");const h=()=>{s(o,d),k.setIcon(g,"checkmark"),setTimeout(()=>k.setIcon(g,"clipboard"),_e)};d.addEventListener("click",()=>h()),n.options.keyboard&&(o.tabIndex=0,o.addEventListener("keydown",f=>{["Enter","Space"].includes(f.code)&&(f.preventDefault(),h())}))})}function r(u){n.options.inline&&(u.addClass("syntax-copy"),n.options.tooltip&&k.setTooltip(u,"Double-click to copy"),u.addEventListener("dblclick",()=>s(u)),u.addEventListener("mousedown",o=>{o.detail===2&&o.preventDefault()}))}e.scope==="inline"?r(e.el):i(e.el)}const Vs={status:"on",options:{line:!0,keyboard:!0,inline:!0,tooltip:!0}},Us=async e=>{const{plugin:t}=e.tab,n=e.mod.settings;K(e,s=>{const{contentEl:i}=s;s.setTitle(e.mod.name),new E(i,t).setName("Line").setDesc("Click on the line start gutter to copy the line.").addToggle(a=>{a.setValue(n.options.line).onChange(async r=>{n.options.line=r,await e.tab.saveSettings()})}),new E(i,t).setName("Keyboard").setDesc("Use the keyboard to tab between lines and copy them.").addToggle(a=>{a.setValue(n.options.keyboard).onChange(async r=>{n.options.keyboard=r,await e.tab.saveSettings()})}),new E(i,t).setName("Inline").setDesc("Double-click on inline code to copy.").addToggle(a=>{a.setValue(n.options.inline).onChange(async r=>{n.options.inline=r,await e.tab.saveSettings()})}),new E(i,t).setName("Tooltips").setDesc("Display a tooltip when a copy action is focused or hovered over.").addToggle(a=>{a.setValue(n.options.tooltip).onChange(async r=>{n.options.tooltip=r,await e.tab.saveSettings()})})})},Ws={id:"copy",aliases:[],name:"Copy",description:"Add the ability to copy code block lines and inline code.",scope:"all",hooks:["post-process"],run:Bs,commands:H,settings:Vs,settingTab:Us};var he,Oe;function Fs(){if(Oe)return he;Oe=1;var e="[object Symbol]",t=/[\\^$.*+?()[\]{}|]/g,n=RegExp(t.source),s=typeof R=="object"&&R&&R.Object===Object&&R,i=typeof self=="object"&&self&&self.Object===Object&&self,a=s||i||Function("return this")(),r=Object.prototype,u=r.toString,o=a.Symbol,d=o?o.prototype:void 0,g=d?d.toString:void 0;function h(m){if(typeof m=="string")return m;if(y(m))return g?g.call(m):"";var O=m+"";return O=="0"&&1/m==-1/0?"-0":O}function f(m){return!!m&&typeof m=="object"}function y(m){return typeof m=="symbol"||f(m)&&u.call(m)==e}function T(m){return m==null?"":h(m)}function A(m){return m=T(m),m&&n.test(m)?m.replace(t,"\\$&"):m}return he=A,he}var Gs=Fs();const Ks=ce(Gs);function Qs(e,t){const n=t.mod.settings,s=e.el.innerHTML;function i(u){const o={};return u.forEach(d=>{const g=d.value.match(/^([\d\-,]+)?\/(.+)\/([gdsimy]{0,6}?)$/);if(!g)return;let h=g[2];n.options.escape&&(h=h.replace(/&/g,"(&|&amp;)").replace(/</g,"(<|&lt;)").replace(/>/g,"(>|&gt;)").replace(/"/g,'("|&quot;)').replace(/'/g,"('|&apos;)"));let f;try{f=new RegExp(`(${h})`,g[3])}catch{try{f=new RegExp(`(${Ks(h)})`,g[3])}catch{return}}const y=_(d.params||"gray").shift();y&&(o[y]||(o[y]=[]),o[y].push({value:f,lines:g[1]?ze(g[1]):[]}))}),o}let a=!1,r=ee(s);Object.entries(i(te(e.attributes,t.mod))).forEach(([u,o])=>{o.forEach(d=>{const{value:g,lines:h}=d;r=r.map((f,y)=>{if(h.length&&!h.includes(y+1))return f;const[T,A]=_(u,":"),m=new RegExp(`(?<!<match[^>]*?>[^<>]{0,})${g.source}(?![^<>]{0,}</match>)`,g.flags);return f.replace(m,O=>{a=!0;const $=document.createElement("match");return $.className=`match-${T}`,A&&($.dataset.icon=A),$.innerHTML=O,$.outerHTML})})})}),a&&(e.el.innerHTML=r.join(`
`))}function Xs(e){e.el.findAll("match[data-icon]").forEach(t=>{t.dataset.icon&&(t.innerHTML=`${ye(t.dataset.icon).outerHTML}${t.innerHTML}`)})}const Ys={status:"on",options:{escape:!0}},Zs=async e=>{const{plugin:t}=e.tab,n=e.mod.settings;ae(e,s=>{const{contentEl:i}=s;s.setTitle(e.mod.name),new E(i,t).setName("Auto escape").setDesc("Match escaped characters to their HTML entities.").addToggle(a=>{a.setValue(n.options.escape).onChange(async r=>{n.options.escape=r,await e.tab.saveSettings()})})})},Js={id:"highlight",aliases:["match","rx"],name:"Highlight",description:"Apply text highlighting effects using regular expressions.",info:async()=>(await Promise.resolve().then(()=>$i)).default,scope:"block",hooks:["pre-process","post-process"],run:(e,t)=>{t.hook==="pre-process"?Qs(e,t):t.hook==="post-process"&&Xs(e)},commands:H,settings:Ys,settingTab:Zs};function ei(e,t){te(e.attributes,t.mod).forEach(n=>{const[s,i]=_(n.value,":");s&&e.el.classList.add(`syntax-inline-${s}`),i&&(e.el.innerHTML=`${ye(i).outerHTML}${e.el.innerHTML}`)})}const ti={id:"inline-code",aliases:[],name:"Inline code",description:"Apply syntax highlighting and effects to inline code.",info:async()=>(await Promise.resolve().then(()=>zi)).default,dependent:!0,scope:"inline",hooks:["post-process"],run:ei,settings:{status:"on"},settingTab:ie};function ni(e){e.type==="keyword"&&e.classes.push(`keyword-${e.content}`)}const si={id:"keyword",aliases:[],name:"Keyword classes",description:"Add additional classes to each keyword for greater control over styling.",scope:"all",hooks:["wrap"],run:ni,commands:H,settings:{status:"off"},settingTab:ae};function ii(e,t){function n(s){const i={};return s.forEach(a=>{a.params||(a.params="gray"),_(a.params).forEach(r=>{const u=ze(a.value);u.length&&(i[r]||(i[r]=[]),i[r].push(...u))})}),i}Object.entries(n(te(e.attributes,t.mod))).forEach(([s,i])=>{const[a,r]=_(s,":");i.forEach(u=>{const o=e.el.find(`.line:nth-child(${u})`);o&&(o.addClass(`highlight-${a}`),["ntc","wrn","err"].includes(a)?W(o,"triangle-alert"):a==="ins"?W(o,"diff"):a==="del"?W(o,"x"):a==="chg"?W(o,"pencil"):r&&W(o,r))})})}const ai={id:"line-highlight",aliases:["highlight","lh"],name:"Line highlight",description:"Apply highlighting effects to specific lines.",info:async()=>(await Promise.resolve().then(()=>qi)).default,scope:"block",hooks:["complete"],run:ii,commands:H,settings:{status:"on"},settingTab:ae};function ri(e){e.el.dataset.lineHover=""}const oi={id:"line-hover",aliases:["hover","lh"],name:"Line hover",description:"Highlight the line that is focused or hovered over.",info:async()=>(await Promise.resolve().then(()=>Bi)).default,scope:"block",hooks:["complete"],run:ri,commands:H,settings:{status:"on"},settingTab:K},Ee={status:"desktop",options:{min:1}},li=async e=>{const{plugin:t}=e.tab,n=e.mod.settings;n.options||(n.options=Ee.options),K(e,s=>{const{contentEl:i}=s;s.setTitle(e.mod.name),new E(i,t).setName("Minimum line numbers").setDesc("Display only when there are at least this many lines.").addSlider(a=>{const r=document.createElement("span");r.addClass("syntax-line-numbers-min"),r.innerText=String(n.options.min),a.sliderEl.parentElement.insertBefore(r,a.sliderEl),a.sliderEl.addEventListener("input",()=>{r.innerText=a.sliderEl.value}),a.setValue(n.options.min).setLimits(1,100,1).onChange(async u=>{n.options.min=u,await e.tab.saveSettings()})})})};function ui(e,t){const n=structuredClone(t.mod.settings);t.force&&(n.options=Ee.options),!(e.el.findAll(".line").length<n.options.min)&&(e.el.dataset.lineNumbers="")}const fi={id:"line-numbers",aliases:["numbers","ln"],name:"Line numbers",description:"Display line numbers in code blocks.",info:async()=>(await Promise.resolve().then(()=>Ui)).default,scope:"block",hooks:["post-process"],run:ui,commands:H,settings:Ee,settingTab:li};function di(e){e.el.dataset.lineWrap=""}const hi={id:"line-wrap",aliases:["wrap","lw"],name:"Line wrap",description:"Allow long lines to break and wrap onto the next line.",info:async()=>(await Promise.resolve().then(()=>Fi)).default,scope:"block",hooks:["complete"],run:di,commands:H,settings:{status:"mobile"},settingTab:K};function pi(e){if(!e.el.children.length)return;e.markup=[];let t=0;const n=i=>{const a={el:i,sPos:t};e.markup.push(a),s(i),a.ePos=t},s=i=>{for(let a=0;a<i.childNodes.length;a++){const r=i.childNodes[a];r.nodeType===Node.ELEMENT_NODE?n(r):r.nodeType===Node.TEXT_NODE&&(t+=r.data.length)}};s(e.el)}function gi(e){if(!e.markup)return;const t=(n,s)=>{for(let i=0;i<n.childNodes.length;i++){const a=n.childNodes[i];switch(a.nodeType){case Node.ELEMENT_NODE:if(!t(a,s))return!1;break;case Node.TEXT_NODE:!s.sNode&&s.pos+a.data.length>s.data.sPos&&(s.sNode=a,s.sPos=s.data.sPos-s.pos),s.sNode&&s.pos+a.data.length>=s.data.ePos&&(s.eNode=a,s.ePos=s.data.ePos-s.pos),s.pos+=a.data.length;break}if(s.sNode&&s.eNode){const r=document.createRange();return r.setStart(s.sNode,s.sPos),r.setEnd(s.eNode,s.ePos),s.data.el.innerHTML="",s.data.el.appendChild(r.extractContents()),r.insertNode(s.data.el),r.detach(),!1}}return!0};e.markup.forEach(n=>{t(e.el,{data:n,pos:0})}),e.highlightedCode=e.el.innerHTML}const mi={id:"markup",aliases:[],name:"Markup",description:"Retain HTML markup in the highlighted code.",dependent:!0,scope:"block",hooks:["before-highlight","after-highlight"],run:(e,t)=>{t.hook==="before-highlight"?pi(e):t.hook==="after-highlight"&&gi(e)},settings:{status:"on"}};function bi(e){const t=e.el.dataset.meta||"",n=document.createElement("span");n.innerHTML=be(`<span class="fence">\`\`\`</span>${t}`,"meta");const s=e.el.find(".line:first-child");e.el.insertBefore(n.firstElementChild,s);const i=document.createElement("span");i.innerHTML=be('<span class="fence">```</span>',"meta");const a=e.el.find(".line:last-child");e.el.insertAfter(i.firstElementChild,a)}const ci={id:"meta",aliases:["mt"],name:"Meta",description:"Display opening and closing fences in the code block.",info:async()=>(await Promise.resolve().then(()=>Ki)).default,scope:"block",hooks:["post-process"],run:bi,commands:H,settings:{status:"off"},settingTab:ae};function yi(e,t){function n(i,a){const r=i[a];switch(t.plugin.prism.util.type(r)){case"Array":for(let u=0;u<r.length;u++)n(r,u);break;case"RegExp":i[a]={pattern:r,inside:{}},s(i[a].inside);break;default:s(r.inside||(r.inside={}));break}}function s(i){!i||i.space||i.tab||(i.space=/ /,i.tab=/\t/,Object.keys(i).forEach(a=>{!i.hasOwnProperty(a)||["space","tab"].includes(a)||(a==="rest"?s(i.rest):n(i,a))}))}e.grammar&&s(e.grammar)}function wi(e,t){const n=t.mod.settings,s=a=>a.nodeType!==Node.ELEMENT_NODE||!a.hasClass("space")&&!a.hasClass("tab")?!1:a.hasClass("space")||a.hasClass("tab");e.el.findAll(".line-middle").forEach(a=>{for(let r=0;r<=a.childNodes.length-1;r++){const u=a.childNodes[r];if(!s(u))break;u.addClass("start")}for(let r=a.childNodes.length-1;r>=0;r--){const u=a.childNodes[r];if(!s(u))break;u.addClass("end")}});const i=[];n.options.start&&i.push("start"),n.options.middle&&i.push("middle"),n.options.end&&i.push("end"),i.length&&(e.el.dataset.whitespace=i.join(","))}function ki(e){var t,n;(t=e.grammar)!=null&&t.space&&delete e.grammar.space,(n=e.grammar)!=null&&n.tab&&delete e.grammar.tab}const Ye={status:"on",options:{start:!0,middle:!1,end:!0}},vi=async e=>{const{plugin:t}=e.tab,n=e.mod.settings;n.options||(n.options=Ye.options),K(e,s=>{const{contentEl:i}=s;s.setTitle(e.mod.name),new E(i,t).setName("Start").setDesc("Display leading whitespace.").addToggle(a=>{a.setValue(n.options.start).onChange(async r=>{n.options.start=r,await e.tab.saveSettings()})}),new E(i,t).setName("Between").setDesc("Display whitespace between words and other text.").addToggle(a=>{a.setValue(n.options.middle).onChange(async r=>{n.options.middle=r,await e.tab.saveSettings()})}),new E(i,t).setName("End").setDesc("Display trailing whitespace.").addToggle(a=>{a.setValue(n.options.end).onChange(async r=>{n.options.end=r,await e.tab.saveSettings()})})})},xi={id:"whitespace",aliases:["ws"],name:"Whitespace",description:"Display spaces and tabs as visible characters.",info:async()=>(await Promise.resolve().then(()=>Xi)).default,scope:"all",hooks:["before-highlight","post-process"],run:(e,t)=>{t.hook==="before-highlight"?yi(e,t):t.hook==="post-process"&&wi(e,t)},commands:H,settings:Ye,settingTab:vi,unload:ki};function Ti(e){const t=document.createElement("div");t.addClass("syntax-wrapper"),e.el.parentNode.insertBefore(t,e.el),t.appendChild(e.el)}const Si={id:"wrapper",aliases:[],name:"Wrapper",description:"Adds a wrapper around the code element in a code block.",dependent:!0,scope:"block",hooks:["post-process"],run:Ti,settings:{status:"on"}},F=[Js,mi,si,xi,Cs,ai,zs,oi,fi,hi,ti,ci,Ws,Si];class Ei{constructor(t){S(this,"plugin");S(this,"executeHook",(t,n)=>{F.forEach(s=>{s.hooks.includes(t)&&this.run(n,{hook:t,mod:s,plugin:this.plugin})})});this.plugin=t,this.loadMods()}highlight(t,n){const s=mt(n,le(t)),i={element:t,el:t,scope:le(t),attributes:s};i.el.dataset.meta=n,i.el.dataset.attributes=JSON.stringify(s),this.executeHook("pre-process",i),this.plugin.prism.highlightElement(t),this.executeHook("post-process",i)}run(t,n){if(n.mod.scope!=="all"&&t.scope!==n.mod.scope)return;if(n.mod.dependent===!0)return n.mod.run(t,n);let s=pt(n.mod.settings.status);t.attributes&&te(t.attributes,"mod").forEach(i=>{const a=_(i.value);[n.mod.id,...n.mod.aliases].forEach(u=>{a.includes(u)?s=n.force=!0:a.includes(`no-${u}`)&&(s=n.force=!1)})}),s?n.mod.run(t,n):n.mod.unload&&n.mod.unload(t)}loadMods(){const{plugin:t}=this;F.forEach(n=>{this.loadSettings(),n.hooks.forEach(s=>{this.plugin.prism.hooks.add(s,i=>{var a;i.element&&(i.el=i.element),i.scope=le(i.el),i.attributes=JSON.parse(((a=i.el)==null?void 0:a.dataset.attributes)||"[]")||[],this.run(i,{hook:s,mod:n,plugin:t})})}),n.commands&&n.commands(n,t)})}unloadMods(){Object.keys(this.plugin.prism.hooks.all).forEach(t=>{this.plugin.prism.hooks.all[t]=[]})}loadSettings(){const{settings:t}=this.plugin;F.forEach(n=>{t.mods[n.id]?n.settings=t.mods[n.id]:t.mods[n.id]=n.settings})}getSettingTab(t){F.sort((n,s)=>n.name.localeCompare(s.name)).forEach(async n=>{n.settingTab&&n.settingTab({mod:n,tab:t})})}}const Pi={on:"On",desktop:"Desktop only",mobile:"Mobile only",off:"Off"},Ze={mods:{},excludedLanguages:["mermaid"]};F.forEach(e=>{Ze.mods[e.id]=e.settings});class ji extends k.PluginSettingTab{constructor(n){super(n.app,n);S(this,"plugin");this.plugin=n}async display(){const{containerEl:n}=this,{settings:s}=this.plugin;n.empty(),n.addClass("syntax-settings"),this.plugin.mod.getSettingTab(this),new E(n,this.plugin).setName("Advanced").setHeading();let i;new E(n,this.plugin).setName("Excluded languages").setDesc("Prevent overriding the default processing behavior of specific languages.").addButton(a=>{i=a.buttonEl,a.setButtonText("Relaunch").setCta().setClass("syntax-hidden").onClick(()=>window.location.reload())}).addTextArea(a=>{a.setValue(s.excludedLanguages.join(", ")).onChange(async r=>{i.removeClass("syntax-hidden"),n.addClass("syntax-relaunch"),s.excludedLanguages=gt(r),await this.saveSettings()}),a.inputEl.addEventListener("blur",()=>a.setValue(s.excludedLanguages.join(", ")))})}async saveSettings(){await this.plugin.saveSettings()}}class Ni{constructor(t){S(this,"plugin");S(this,"info",[]);this.plugin=t,this.registerBlockProcessor().registerInlineProcessor()}getLanguages(){return Object.keys(this.plugin.prism.languages).filter(t=>!this.plugin.settings.excludedLanguages.includes(t))}registerBlockProcessor(){return this.getLanguages().forEach(t=>{this.plugin.registerMarkdownCodeBlockProcessor(t,async(n,s,i)=>{const a=this.getInfo(n,s,i);let r=ee(a.text).slice(a.lineStart,a.lineEnd+1).shift();!r||a.lineStart===0&&r==="---"||(r=r.replace(/^`+/,""),await this.plugin.highlight.processBlock(n,{el:s,language:t,meta:r}))})}),this}registerInlineProcessor(){return this.plugin.registerMarkdownPostProcessor(t=>{t.findAll(":not(pre) > code:not(.is-loaded)").forEach(async n=>{let s=n.innerText.match(/^{([\w-]+)?([\w\-:]+)?}\s(.+)$/);s||(s=["","text","",n.innerText]),s.shift();const[i,a,r]=s;await this.plugin.highlight.processInline(r,{el:n,language:i||"text",meta:a||""})})}),this}getInfo(t,n,s){let i=s.getSectionInfo(n);return i||(i={lineStart:0,lineEnd:ee(t).length-1,text:t},this.info&&(i.text=`\`\`\`${this.info.shift()}
${i.text}
\`\`\``)),i}extractInfo(t){this.info=[],Array.from(t.matchAll(/^`{3}([\w-]+\s.+)$/gm)).forEach(n=>{this.info.push(n[1])})}rerenderLeaves(){this.plugin.mod.loadSettings(),this.plugin.app.workspace.getLeavesOfType("markdown").forEach(async t=>t.view.previewMode.rerender(!0))}}var pe,$e;function Ai(){if($e)return pe;$e=1;var e="[object Symbol]",t=/[&<>"'`]/g,n=RegExp(t.source),s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},i=typeof R=="object"&&R&&R.Object===Object&&R,a=typeof self=="object"&&self&&self.Object===Object&&self,r=i||a||Function("return this")();function u(b){return function(U){return b==null?void 0:b[U]}}var o=u(s),d=Object.prototype,g=d.toString,h=r.Symbol,f=h?h.prototype:void 0,y=f?f.toString:void 0;function T(b){if(typeof b=="string")return b;if(m(b))return y?y.call(b):"";var U=b+"";return U=="0"&&1/b==-1/0?"-0":U}function A(b){return!!b&&typeof b=="object"}function m(b){return typeof b=="symbol"||A(b)&&g.call(b)==e}function O(b){return b==null?"":T(b)}function $(b){return b=O(b),b&&n.test(b)?b.replace(t,o):b}return pe=$,pe}var Ii=Ai();const Re=ce(Ii);class Mi{constructor(t){S(this,"plugin");this.plugin=t}async processBlock(t,n){const{language:s,meta:i}=n,a=document.createElement("pre");a.className="syntax-block";const r=a.createEl("code");r.addClass("syntax-block",`language-${s}`),r.dataset.meta=i,r.innerHTML=Re(t),this.plugin.mod.highlight(r,i),r.addClass("is-loaded"),n.el.replaceWith(a)}async processInline(t,n){const s=document.createElement("code");s.addClass("syntax-inline",`language-${n.language}`),s.innerHTML=Re(t),this.plugin.mod.highlight(s,n.meta),s.addClass("is-loaded"),n.el.replaceWith(s)}}class Li extends k.Plugin{constructor(){super(...arguments);S(this,"settings",Ze);S(this,"prism");S(this,"processor");S(this,"mod");S(this,"highlight")}async onload(){await this.loadSettings(),this.prism=await k.loadPrism(),this.processor=new Ni(this),this.mod=new Ei(this),this.highlight=new Mi(this),this.addSettingTab(new ji(this))}async loadSettings(){this.settings={...this.settings,...await this.loadData()}}async onExternalSettingsChange(){await this.loadSettings(),this.processor.rerenderLeaves()}async saveSettings(){await this.saveData(this.settings),this.processor.rerenderLeaves()}async onunload(){this.mod.unloadMods()}}const Hi="Aliases: `autolinker`, `link`, `al`\n\nTurn URLs, email addresses, and phone numbers into clickable links within code block comments. These are processed using the [Autolinker.js](https://github.com/gregjacobs/Autolinker.js) library.\n\n```js mod=al,mt,no-ln\n// URL: https://github.com/gregjacobs/Autolinker.js\n// Email & Phone: johnny.appleseed@example.com (555-555-5555)\n```\n",_i=Object.freeze(Object.defineProperty({__proto__:null,default:Hi},Symbol.toStringTag,{value:"Module"})),Oi=`> [!warning] Notice
> This feature is intended for users who have a good understanding of regular expressions. Learn more on [javascript.info](https://javascript.info/regular-expressions/).

Aliases: \`highlight\`, \`match\`, \`rx\`

Use the power of regular expressions to find and highlight text in code blocks.

\`\`\`js rx=/console/g rx=/\\(".+"\\)/g mod=rx,mt,no-ln
console.log("hello world");
console.log("hello world");
console.log("hello world");
console.log("hello world");
\`\`\`

Highlight color can be changed by adding a color name parameter.

\`\`\`js rx[red]=/red/ rx[green]=/green/ rx[blue]=/blue/ mod=rx,mt,no-ln
console.log("red");
console.log("green");
console.log("blue");
\`\`\`

Force the text color to match the highlight by using an exclamation mark.

\`\`\`js rx[red!]=/red/ rx[green!]=/green/ rx[blue!]=/blue/ mod=rx,mt,no-ln
console.log("red");
console.log("green");
console.log("blue");
\`\`\`

An icon can be added by specifying its name after the color.

\`\`\`js rx[yellow:dna]=/dna/ rx[cyan:checkmark]=/checkmark/ rx[purple:zap]=/zap/ mod=rx,mt,no-ln
console.log("dna");
console.log("checkmark");
console.log("zap");
\`\`\`

A list of line numbers can be specified to narrow down the matches.

\`\`\`js rx=1,2-3/log/g rx[orange]=4-6/log/g mod=rx,mt,no-ln
console.log("hello world");
console.log("hello world");
console.log("hello world");
console.log("hello world");
console.log("hello world");
console.log("hello world");
\`\`\`
`,$i=Object.freeze(Object.defineProperty({__proto__:null,default:Oi},Symbol.toStringTag,{value:"Module"})),Ri='Apply highlighting by adding the `{language}` attribute before the inline code. Highlight color can be changed by adding a color name parameter. An icon can be added by specifying its name after the color.\n\n| Parameter                                           | Rendered                                          |\n| --------------------------------------------------- | ------------------------------------------------- |\n| <code class="is-loaded">{js}</code>                 | `{js} console.log("hello world")`                 |\n| <code class="is-loaded">{js:yellow:star}</code>     | `{js:yellow:star} console.log("hello world")`     |\n| <code class="is-loaded">{txt:red}</code>            | `{txt:red} console.log("hello world")`            |\n| <code class="is-loaded">{txt:orange:smile}</code>   | `{txt:orange:smile} console.log("hello world")`   |\n| <code class="is-loaded">{txt:yellow}</code>         | `{txt:yellow} console.log("hello world")`         |\n| <code class="is-loaded">{txt:green:zap}</code>      | `{txt:green:zap} console.log("hello world")`      |\n| <code class="is-loaded">{txt:cyan}</code>           | `{txt:cyan} console.log("hello world")`           |\n| <code class="is-loaded">{txt:blue:heart}</code>     | `{txt:blue:heart} console.log("hello world")`     |\n| <code class="is-loaded">{txt:purple}</code>         | `{txt:purple} console.log("hello world")`         |\n| <code class="is-loaded">{txt:pink:thumbs-up}</code> | `{txt:pink:thumbs-up} console.log("hello world")` |\n',zi=Object.freeze(Object.defineProperty({__proto__:null,default:Ri},Symbol.toStringTag,{value:"Module"})),Di=`Aliases: \`line-highlight\`, \`highlight\`, \`lh\`

Apply a highlight effect to a single line, a list of lines, or a range of lines.

\`\`\`js lh=2-4 mod=lh,mt,no-ln
console.log("hello world");
console.log("hello world");
console.log("hello world");
console.log("hello world");
console.log("hello world");
\`\`\`

Highlight color can be changed by adding a color parameter.

\`\`\`js lh[red]=1 lh[green]=2 lh[blue]=3 mod=lh,mt,no-ln
console.log("red");
console.log("green");
console.log("blue");
\`\`\`

Force the text color to match the highlight by using an exclamation mark.

\`\`\`js lh[red!]=1 lh[green!]=2 lh[blue!]=3 mod=lh,mt,no-ln
console.log("red");
console.log("green");
console.log("blue");
\`\`\`

An icon can be added by specifying its name after the color.

\`\`\`js lh[red:dna]=1 lh[green:checkmark]=2 lh[blue:zap]=3 mod=lh,mt,no-ln
console.log("dna");
console.log("checkmark");
console.log("zap");
\`\`\`

Imitate diffs using ins (insert), del (delete), or chg (change) parameters.

\`\`\`js lh[ins]=1 lh[del]=2 lh[chg]=3 mod=lh,mt,no-ln
console.log("insert");
console.log("delete");
console.log("change");
\`\`\`

 Show alerts with ntc (notice), wrn (warning), and err (error) parameters.

\`\`\`js lh[ntc]=1 lh[wrn]=2 lh[err]=3 mod=lh,mt,no-ln
console.log("notice");
console.log("warning");
console.log("error");
\`\`\`

Draw attention to one or more lines using the focus parameter.

\`\`\`js lh[focus]=2 mod=lh,mt,no-ln
console.log("hello world");
console.log("hello world, this line has focus");
console.log("hello world");
\`\`\`
`,qi=Object.freeze(Object.defineProperty({__proto__:null,default:Di},Symbol.toStringTag,{value:"Module"})),Ci="Aliases: `line-hover`, `hover`, `lh`\n",Bi=Object.freeze(Object.defineProperty({__proto__:null,default:Ci},Symbol.toStringTag,{value:"Module"})),Vi="Aliases: `line-numbers`, `numbers`, `ln`\n",Ui=Object.freeze(Object.defineProperty({__proto__:null,default:Vi},Symbol.toStringTag,{value:"Module"})),Wi="Aliases: `line-wrap`, `wrap`, `lw`\n",Fi=Object.freeze(Object.defineProperty({__proto__:null,default:Wi},Symbol.toStringTag,{value:"Module"})),Gi="Aliases: `meta`, `mt`\n",Ki=Object.freeze(Object.defineProperty({__proto__:null,default:Gi},Symbol.toStringTag,{value:"Module"})),Qi="Aliases: `whitespace`, `ws`\n",Xi=Object.freeze(Object.defineProperty({__proto__:null,default:Qi},Symbol.toStringTag,{value:"Module"}));module.exports=Li;
